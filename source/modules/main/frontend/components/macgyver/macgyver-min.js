var augmentWidthOrHeight,core_pnum,cssExpand,extendjQuery,getStyles,getWidthOrHeight,getWindow,isWindow,jqLiteExtend,rnumnonpx;angular.module("Mac",["Mac.Util"]),cssExpand=["Top","Right","Bottom","Left"],core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),getStyles=function(t){return window.getComputedStyle(t,null)},isWindow=function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},getWindow=function(t){return isWindow(t)?t:9===t.nodeType&&t.defaultView},augmentWidthOrHeight=function(t,e,i,n,r){var s,o,a;if(i===(n?"border":"content"))return 0;for(o="Width"===e?1:0,s=a=o;3>=a;s=a+=2)"margin"===i&&(val+=parseFloat(r[""+i+cssExpand[s]])),n?("content"===i&&(val-=parseFloat(r["padding"+cssExpand[s]])),"margin"!==i&&(val-=parseFloat(r["border"+cssExpand[s]]))):(val+=parseFloat(r["padding"+cssExpand[s]]),"padding"!==i&&(val+=parseFloat(r["border"+cssExpand+"Width"])));return val},getWidthOrHeight=function(t,e,i){return function(n){var r,s,o,a,l,c,u,h;if(r=function(){switch(e){case"inner":return"padding";case"outer":return"";default:return"content"}}(),o=r||(n===!0?"margin":"border"),isWindow(i))return i.document.documentElement["client"+t];if(9===i.nodeType)return s=i.documentElement,Math.max(i.body["scroll"+t],s["scroll"+t],i.body["offset"+t],s["offset"+t],s["client"+t]);if(h=!0,c=getStyles(i),l=t.toLowerCase(),u="Height"===t?i.offsetHeight:i.offsetWidth,a="border-box"===i.style.boxSizing,0>=u||null===u){if(u=c[l],(0>u||null===u)&&(u=i.style[l]),rnumnonpx.test(u))return u;h=a,u=parseFloat(u)||0}return u+augmentWidthOrHeight(i,t,o||(a?"border":"content"),h,c)}},jqLiteExtend={height:function(t){return getWidthOrHeight("Height","",t)()},width:function(t){return getWidthOrHeight("Width","",t)()},outerHeight:function(t,e){return getWidthOrHeight("Height","outer",t)(e)},outerWidth:function(t,e){return getWidthOrHeight("Width","outer",t)(e)},offset:function(t){var e,i,n,r;return e={top:0,left:0},(i=t&&t.ownerDocument)?(n=i.documentElement,null!=t.getBoundingClientRect&&(e=t.getBoundingClientRect()),r=getWindow(i),{top:e.top+r.pageYOffset-n.clientTop,left:e.left+r.pageXOffset-n.clientLeft}):void 0},scrollTop:function(t,e){var i;return i=getWindow(t),null==e?i?i.pageYOffset:t.scrollTop:i?i.scrollTo(window.pageXOffset,e):t.scrollTop=e}},extendjQuery=function(){var t;if(null==window.jQuery)return t=angular.element,angular.forEach(jqLiteExtend,function(e,i){return t.prototype[i]=function(t,i){return this.length?e(this[0],t,i):void 0}})},extendjQuery(),function(t,e){function i(e,i){var r,s,o,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,s=r.name,e.href&&s&&"map"===r.nodeName.toLowerCase()?(o=t("img[usemap=#"+s+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,r,s=t(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function r(e,i,n,r){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(o,r(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(o,r(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var r,s=t.ui[e].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(t,e,i){var n,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)t.options[r[n][0]]&&r[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return e[n]>0?!0:(e[n]=1,r=e[n]>0,e[n]=0,r)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(s){}r(e)},t.widget=function(e,i,n){var r,s,o,a,l={},c=e.split(".")[0];e=e.split(".")[1],r=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},s=t[c][e],o=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},r=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}()):void(l[e]=n)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:e},l,{constructor:o,namespace:c,widgetName:e,widgetFullName:r}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var r,s,o=n.call(arguments,1),a=0,l=o.length;l>a;a++)for(r in o[a])s=o[a][r],o[a].hasOwnProperty(r)&&s!==e&&(i[r]=t.isPlainObject(s)?t.isPlainObject(i[r])?t.widget.extend({},i[r],s):t.widget.extend({},s):s);return i},t.widget.bridge=function(i,r){var s=r.prototype.widgetFullName||i;t.fn[i]=function(o){var a="string"==typeof o,l=n.call(arguments,1),c=this;return o=!a&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,this.each(a?function(){var n,r=t.data(this,s);return r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,l),n!==r&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}:function(){var e=t.data(this,s);e?e.option(o||{})._init():t.data(this,s,new r(o,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var r,s,o,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},r=i.split("."),i=r.shift(),r.length){for(s=a[i]=t.widget.extend({},this.options[i]),o=0;o<r.length-1;o++)s[r[o]]=s[r[o]]||{},s=s[r[o]];if(i=r.pop(),n===e)return s[i]===e?null:s[i];s[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var r,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,function(n,o){function a(){return e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?r.delegate(u,c,a):i.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var r,s,o=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,n),!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?i:r.effect||i:e;r=r||{},"number"==typeof r&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),o&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function r(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var s,o=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(s!==e)return s;var i,n,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return t("body").append(r),i=o.offsetWidth,r.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),s=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,s="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:s?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var s,p,m,g,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),D=(e.collision||"flip").split(" "),k={};return _=r(b),b[0].preventDefault&&(e.at="left top"),p=_.width,m=_.height,g=_.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",t=h.exec(n[0]),i=h.exec(n[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===D.length&&(D[1]=D[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),s=i(k.at,p,m),v.left+=s[0],v.top+=s[1],this.each(function(){var r,c,u=t(this),h=u.outerWidth(),d=u.outerHeight(),f=n(this,"marginLeft"),_=n(this,"marginTop"),x=h+f+n(this,"marginRight")+w.width,C=d+_+n(this,"marginBottom")+w.height,M=t.extend({},v),S=i(k.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?M.left-=h:"center"===e.my[0]&&(M.left-=h/2),"bottom"===e.my[1]?M.top-=d:"center"===e.my[1]&&(M.top-=d/2),M.left+=S[0],M.top+=S[1],t.support.offsetFractions||(M.left=l(M.left),M.top=l(M.top)),r={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,n){t.ui.position[D[i]]&&t.ui.position[D[i]][n](M,{targetWidth:p,targetHeight:m,elemWidth:h,elemHeight:d,collisionPosition:r,collisionWidth:x,collisionHeight:C,offset:[s[0]+S[0],s[1]+S[1]],my:e.my,at:e.at,within:y,elem:u})}),e.using&&(c=function(t){var i=g.left-M.left,n=i+p-h,r=g.top-M.top,s=r+m-d,l={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:M.left,top:M.top,width:h,height:d},horizontal:0>n?"left":i>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};h>p&&a(i+n)<p&&(l.horizontal="center"),d>m&&a(r+s)<m&&(l.vertical="middle"),l.important=o(a(i),a(n))>o(a(r),a(s))?"horizontal":"vertical",e.using.call(this,t,l)}),u.offset(t.extend(M,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-s-r;e.collisionWidth>s?l>0&&0>=c?(i=t.left+l+e.collisionWidth-s-r,t.left+=l-i):t.left=c>0&&0>=l?r:l>c?r+s-e.collisionWidth:r:l>0?t.left+=l:c>0?t.left-=c:t.left=o(t.left-a,t.left)},top:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-s-r;e.collisionHeight>s?l>0&&0>=c?(i=t.top+l+e.collisionHeight-s-r,t.top+=l-i):t.top=c>0&&0>=l?r:l>c?r+s-e.collisionHeight:r:l>0?t.top+=l:c>0?t.top-=c:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,r=e.within,s=r.offset.left+r.scrollLeft,o=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-o-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>u?(i=t.left+d+p+f+e.collisionWidth-o-s,(0>i||i<a(u))&&(t.left+=d+p+f)):h>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-l,(n>0||a(n)<h)&&(t.left+=d+p+f))},top:function(t,e){var i,n,r=e.within,s=r.offset.top+r.scrollTop,o=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-o-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>u?(n=t.top+p+f+m+e.collisionHeight-o-s,t.top+p+f+m>u&&(0>n||n<a(u))&&(t.top+=p+f+m)):h>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,t.top+p+f+m>h&&(i>0||a(i)<h)&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,r,s,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(a),i=o||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(s.inline?e.parent()[0]:s.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function r(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var s,o="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return r(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,r,s;n=e.nodeName.toLowerCase(),r="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),s=this._newInst(t(e),r),s.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,s):r&&this._inlineDatepicker(e,s)},_newInst:function(e,i){var r=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,o,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,r,s,o=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[a?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(r=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:s,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(s?t("<img/>").attr({src:s,alt:r,title:r}):r)),e[a?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,r,s=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(i=0,n=0,r=0;r<t.length;r++)t[r].length>i&&(i=t[r].length,n=r);return n},s.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),t.input.attr("size",this._formatDate(t,s).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,s,a){var l,c,u,h,d,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],o,p)),r(p.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,u/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(e){var i,n=t(e),r=t.data(e,o);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,o),"input"===i?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,r=t(e),s=t.data(e,o);r.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=r.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,r=t(e),s=t.data(e,o);r.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=r.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,o)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,s){var o,a,l,c,u=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):u?"all"===n?t.extend({},u.settings):this._get(u,n):null:(o=n||{},"string"==typeof n&&(o={},o[n]=s),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),r(u.settings,o),null!==l&&o.dateFormat!==e&&o.minDate===e&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&o.dateFormat!==e&&o.maxDate===e&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,r,s=t.datepicker._getInst(e.target),o=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",s.dpDiv),r[0]&&t.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,r[0]),i=t.datepicker._get(s,"onSelect"),i?(n=t.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):t.datepicker._hideDatepicker(),!1;
case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,r=t.datepicker._getInst(e.target);return t.datepicker._get(r,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(r){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,n,s,o,a,l,c;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(i,"beforeShow"),s=n?n.apply(e,[e,i]):{},s!==!1&&(r(i.settings,s),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each(function(){return o|="fixed"===t(this).css("position"),!o}),a={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),a=t.datepicker._checkOffset(i,a,o),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,s=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(e),r=n[1],o=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var r=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?r-o:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),r=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,r,s,a=this._curInst;!a||e&&a!==t.data(e,o)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),r=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),n,r):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1,s=this._get(a,"onClose"),s&&s.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var r=t(e),s=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(e){var i,n=t(e),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var r=t(e),s=this._getInst(r[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(r)},_selectDay:function(e,i,n,r){var s,o=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=t("a",r).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,r=t(e),s=this._getInst(r[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),n=this._get(s,"onSelect"),n?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,r,s=this._get(e,"altField");s&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),r=this.formatDate(i,n,this._getFormatConfig(e)),t(s).each(function(){t(this).val(r)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var r,s,o,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,_=-1,b=!1,y=function(t){var i=r+1<e.length&&e.charAt(r+1)===t;return i&&r++,i},w=function(t){var e=y(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r=new RegExp("^\\d{1,"+n+"}"),s=i.substring(l).match(r);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},D=function(e,n,r){var s=-1,o=t.map(y(e)?r:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,e){var n=e[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(s=e[0],l+=n.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+l},k=function(){if(i.charAt(l)!==e.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<e.length;r++)if(b)"'"!==e.charAt(r)||y("'")?k():b=!1;else switch(e.charAt(r)){case"d":v=w("d");break;case"D":D("D",h,d);break;case"o":_=w("o");break;case"m":g=w("m");break;case"M":g=D("M",p,f);break;case"y":m=w("y");break;case"@":a=new Date(w("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":y("'")?k():b=!0;break;default:k()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),_>-1)for(g=1,v=_;;){if(s=this._getDaysInMonth(m,g-1),s>=v)break;g++,v-=s}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},u=function(t,e,i,n){return l(t)?n[e]:i[e]},h="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||l("'")?h+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":h+=c("d",e.getDate(),2);break;case"D":h+=u("D",e.getDay(),r,s);break;case"o":h+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",e.getMonth()+1,2);break;case"M":h+=u("M",e.getMonth(),o,a);break;case"y":h+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=t.charAt(n)}return h},_possibleChars:function(t){var e,i="",n=!1,r=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||r("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),s=r,o=this._getFormatConfig(t);try{s=this.parseDate(i,n,o)||r}catch(a){n=e?"":n}t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),t.currentDay=n?s.getDate():0,t.currentMonth=n?s.getMonth():0,t.currentYear=n?s.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var r=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},s=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(n){}for(var r=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=r.getFullYear(),o=r.getMonth(),a=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":o+=parseInt(c[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(c[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(s,o))}c=l.exec(i)}return new Date(s,o,a)},o=null==i||""===i?n:"string"==typeof i?s(i):"number"==typeof i?isNaN(i)?n:r(i):new Date(i.getTime());return o=o&&"Invalid Date"===o.toString()?n:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,r=t.selectedMonth,s=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),r===t.selectedMonth&&s===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,r,s,o,a,l,c,u,h,d,p,f,m,g,v,_,b,y,w,D,k,x,C,M,S,I,T,A,P,z,E,N,$,R,F,O,H,W=new Date,L=this._daylightSavingAdjust(new Date(W.getFullYear(),W.getMonth(),W.getDate())),j=this._get(t,"isRTL"),U=this._get(t,"showButtonPanel"),Y=this._get(t,"hideIfNoPrevNext"),B=this._get(t,"navigationAsDateFormat"),K=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),Z=1!==K[0]||1!==K[1],V=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),G=t.drawMonth-q,te=t.drawYear;if(0>G&&(G+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-K[0]*K[1]+1,J.getDate())),e=Q&&Q>e?Q:e;this._daylightSavingAdjust(new Date(te,G,1))>e;)G--,0>G&&(G=11,te--);for(t.drawMonth=G,t.drawYear=te,i=this._get(t,"prevText"),i=B?this.formatDate(i,this._daylightSavingAdjust(new Date(te,G-X,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,te,G)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>":Y?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>",r=this._get(t,"nextText"),r=B?this.formatDate(r,this._daylightSavingAdjust(new Date(te,G+X,1)),this._getFormatConfig(t)):r,s=this._canAdjustMonth(t,1,te,G)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+r+"</span></a>":Y?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+r+"</span></a>",o=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?V:L,o=B?this.formatDate(o,a,this._getFormatConfig(t)):o,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(j?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",D=0;D<K[0];D++){for(k="",this.maxRows=4,x=0;x<K[1];x++){if(C=this._daylightSavingAdjust(new Date(te,G,t.selectedDay)),M=" ui-corner-all",S="",Z){if(S+="<div class='ui-datepicker-group",K[1]>1)switch(x){case 0:S+=" ui-datepicker-group-first",M=" ui-corner-"+(j?"right":"left");break;case K[1]-1:S+=" ui-datepicker-group-last",M=" ui-corner-"+(j?"left":"right");break;default:S+=" ui-datepicker-group-middle",M=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===D?j?s:n:"")+(/all|right/.test(M)&&0===D?j?n:s:"")+this._generateMonthYearHeader(t,G,te,Q,J,D>0||x>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",I=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)T=(w+u)%7,I+="<th"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[T]+"'>"+p[T]+"</span></th>";for(S+=I+"</tr></thead><tbody>",A=this._getDaysInMonth(te,G),te===t.selectedYear&&G===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,A)),P=(this._getFirstDayOfMonth(te,G)-u+7)%7,z=Math.ceil((P+A)/7),E=Z&&this.maxRows>z?this.maxRows:z,this.maxRows=E,N=this._daylightSavingAdjust(new Date(te,G,1-P)),$=0;E>$;$++){for(S+="<tr>",R=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>":"",w=0;7>w;w++)F=g?g.apply(t.input?t.input[0]:null,[N]):[!0,""],O=N.getMonth()!==G,H=O&&!_||!F[0]||Q&&Q>N||J&&N>J,R+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(N.getTime()===C.getTime()&&G===t.selectedMonth&&t._keyEvent||b.getTime()===N.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!v?"":" "+F[1]+(N.getTime()===V.getTime()?" "+this._currentClass:"")+(N.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(O&&!v||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(O&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===L.getTime()?" ui-state-highlight":"")+(N.getTime()===V.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);S+=R+"</tr>"}G++,G>11&&(G=0,te++),S+="</tbody></table>"+(Z?"</div>"+(K[0]>0&&x===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=S}y+=k}return y+=c,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,n,r,s,o,a){var l,c,u,h,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(s||!g)y+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=r&&r.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=n.getMonth())&&(!c||u<=r.getMonth())&&(y+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");y+="</select>"}if(_||(b+=y+(!s&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",s||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(h[0]),m=Math.max(f,p(h[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=r?Math.min(m,r.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!s&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),r=t.drawMonth+("M"===i?e:0),s=Math.min(t.selectedDay,this._getDaysInMonth(n,r))+("D"===i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,r,s)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),r=i&&i>e?i:e;return n&&r>n?n:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var r=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(i,n+(0>e?e:r[0]*r[1]),1));return 0>e&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var i,n,r=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),o=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!r||e.getTime()>=r.getTime())&&(!s||e.getTime()<=s.getTime())&&(!o||e.getFullYear()>=o)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,n,r,s,o=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),s="ui-resizable-"+n,r=t("<div class='ui-resizable-handle "+s+"'></div>"),r.css({zIndex:a.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(e){var i,n,r,s;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(r,s),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){a.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,r=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(i){var n,r,s,o=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=e(this.helper.css("left")),r=e(this.helper.css("top")),o.containment&&(n+=t(o.containment).scrollLeft()||0,r+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,n=this.helper,r={},s=this.originalMousePosition,o=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,h=e.pageX-s.left||0,d=e.pageY-s.top||0,p=this._change[o];return p?(i=p.apply(this,[e,h,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==u&&(r.height=this.size.height+"px"),n.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(r)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,n,r,s,o,a,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&t.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,s=n?0:u.sizeDiff.width,o={width:u.helper.width()-s,height:u.helper.height()-r},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(o,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1
},_updateVirtualBoundaries:function(t){var e,n,r,s,o,a=this.options;o={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,r=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===r&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===r&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,r=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=i(t.width)&&e.minWidth&&e.minWidth>t.width,a=i(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),r&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&u&&(t.left=l-e.minWidth),r&&u&&(t.left=l-e.maxWidth),a&&h&&(t.top=c-e.minHeight),s&&h&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,r,s=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(r=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],n=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);r.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),n=i.options,r=i._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&t.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,n,r,s,o,a,l,c=t(this).data("ui-resizable"),u=c.options,h=c.element,d=u.containment,p=d instanceof t?d.get(0):/parent/.test(d)?h.parent().get(0):d;p&&(c.containerElement=t(p),/document/.test(d)||d===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,r){n[t]=e(i.css("padding"+r))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},r=c.containerOffset,s=c.containerSize.height,o=c.containerSize.width,a=t.ui.hasScroll(p,"left")?p.scrollWidth:o,l=t.ui.hasScroll(p)?p.scrollHeight:s,c.parentData={element:p,left:r.left,top:r.top,width:a,height:l}))},resize:function(e){var i,n,r,s,o=t(this).data("ui-resizable"),a=o.options,l=o.containerOffset,c=o.position,u=o._aspectRatio||e.shiftKey,h={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-h.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=a.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-h.left:o.offset.left-h.left)+o.sizeDiff.width),n=Math.abs((o._helper?o.offset.top-h.top:o.offset.top-l.top)+o.sizeDiff.height),r=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),r&&s&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.containerOffset,r=e.containerPosition,s=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,c=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(s.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(s.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).data("ui-resizable"),r=n.options,s=n.originalSize,o=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(e,n){t(e).each(function(){var e=t(this),r=t(this).data("ui-resizable-alsoresize"),s={},o=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(r[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size,r=e.originalSize,s=e.originalPosition,o=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-r.width)/l)*l,h=Math.round((n.height-r.height)/c)*c,d=r.width+u,p=r.height+h,f=i.maxWidth&&i.maxWidth<d,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(d+=l),v&&(p+=c),f&&(d-=l),m&&(p-=c),/^(se|s|e)$/.test(o)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(o)?(e.size.width=d,e.size.height=p,e.position.top=s.top-h):/^(sw)$/.test(o)?(e.size.width=d,e.size.height=p,e.position.left=s.left-u):(e.size.width=d,e.size.height=p,e.position.top=s.top-h,e.position.left=s.left-u)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,r=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,s.widgetName+"-item")===s?(n=t(this),!1):void 0}),t.data(e.target,s.widgetName+"-item")===s&&(n=t(e.target)),n&&(!this.options.handle||i||(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(r=!0)}),r))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,n){var r,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,r,s,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-t(document).scrollTop()<o.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<o.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+o.scrollSpeed)),e.pageX-t(document).scrollLeft()<o.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<o.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+o.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],r=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],r):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,s=t.left,o=s+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||n+c>a&&l>n+c,d="y"===this.options.axis||e+u>s&&o>e+u,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:s<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=i&&n,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return r?this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:r&&("down"===r&&i||"up"===r&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,r,s,o=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(r=t(l[i]),n=r.length-1;n>=0;n--)s=t.data(r[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&a.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){o.push(this)});return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,r,s,o,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(r=t(d[i]),n=r.length-1;n>=0;n--)s=t.data(r[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(h.push([t.isFunction(s.options.items)?s.options.items.call(s.element[0],e,{item:this.currentItem}):t(s.options.items,s.element),s]),this.containers.push(s));for(i=h.length-1;i>=0;i--)for(o=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,r,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=r.outerWidth(),n.height=r.outerHeight()),s=r.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(r)}):"img"===n&&r.attr("src",e.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(t,r){(!i||n.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(n){var r,s,o,a,l,c,u,h,d,p,f=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!t.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(f&&t.contains(this.containers[r].element[0],f.element[0]))continue;f=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",n,this._uiHash(this)),this.containers[r].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)t.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(h=this.items[s].item.offset()[l],d=!1,Math.abs(h-u)>Math.abs(h+this.items[s][c]-u)&&(d=!0,h+=this.items[s][c]),Math.abs(h-u)<o&&(o=Math.abs(h-u),a=this.items[s],this.direction=d?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],i=t(r.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*n}},_generatePosition:function(e){var i,n,r=this.options,s=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/r.grid[0])*r.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))
}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),!function(t,e){"use strict";function i(t,e){var i,n,r=t.toLowerCase();for(e=[].concat(e),i=0;i<e.length;i+=1)if(n=e[i]){if(n.test&&n.test(t))return!0;if(n.toLowerCase()===r)return!0}}var n=e.prototype.trim,r=e.prototype.trimRight,s=e.prototype.trimLeft,o=function(t){return 1*t||0},a=function(t,e){if(1>e)return"";for(var i="";e>0;)1&e&&(i+=t),e>>=1,t+=t;return i},l=[].slice,c=function(t){return null==t?"\\s":t.source?t.source:"["+f.escapeRegExp(t)+"]"},u={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},h={};for(var d in u)h[u[d]]=d;h["'"]="#39";var p=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var i=a,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var s,o,a,l,c,u,h,d=1,f=n.length,m="",g=[];for(o=0;f>o;o++)if(m=t(n[o]),"string"===m)g.push(n[o]);else if("array"===m){if(l=n[o],l[2])for(s=r[d],a=0;a<l[2].length;a++){if(!s.hasOwnProperty(l[2][a]))throw new Error(p('[_.sprintf] property "%s" does not exist',l[2][a]));s=s[l[2][a]]}else s=l[1]?r[l[1]]:r[d++];if(/[^s]/.test(l[8])&&"number"!=t(s))throw new Error(p("[_.sprintf] expecting number but found %s",t(s)));switch(l[8]){case"b":s=s.toString(2);break;case"c":s=e.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=l[7]?s.toExponential(l[7]):s.toExponential();break;case"f":s=l[7]?parseFloat(s).toFixed(l[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=e(s))&&l[7]?s.substring(0,l[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(l[8])&&l[3]&&s>=0?"+"+s:s,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",h=l[6]-e(s).length,c=l[6]?i(u,h):"",g.push(l[5]?s+c:c+s)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,i=[],n=[],r=0;e;){if(null!==(i=/^[^\x25]+/.exec(e)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(e)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(i[2]){r|=1;var s=[],o=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(s.push(a[1]);""!==(o=o.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(o)))s.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");s.push(a[1])}i[2]=s}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}e=e.substring(i[0].length)}return n},n}(),f={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":e(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":e(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,i){return null==t?[]:(t=e(t),i=~~i,i>0?t.match(new RegExp(".{1,"+i+"}","g")):[t])},clean:function(t){return f.strip(t).replace(/\s+/g," ")},count:function(t,i){if(null==t||null==i)return 0;t=e(t),i=e(i);for(var n=0,r=0,s=i.length;;){if(r=t.indexOf(i,r),-1===r)break;n++,r+=s}return n},chars:function(t){return null==t?[]:e(t).split("")},swapCase:function(t){return null==t?"":e(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":e(t).replace(/[&<>"']/g,function(t){return"&"+h[t]+";"})},unescapeHTML:function(t){return null==t?"":e(t).replace(/\&([^;]+);/g,function(t,i){var n;return i in u?u[i]:(n=i.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(n[1],16)):(n=i.match(/^#(\d+)$/))?e.fromCharCode(~~n[1]):t})},escapeRegExp:function(t){return null==t?"":e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,i,n){var r=f.chars(t);return r.splice(~~e,~~i,n),r.join("")},insert:function(t,e,i){return f.splice(t,e,0,i)},include:function(t,i){return""===i?!0:null==t?!1:-1!==e(t).indexOf(i)},join:function(){var t=l.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:e(t).split("\n")},reverse:function(t){return f.chars(t).reverse().join("")},startsWith:function(t,i){return""===i?!0:null==t||null==i?!1:(t=e(t),i=e(i),t.length>=i.length&&t.slice(0,i.length)===i)},endsWith:function(t,i){return""===i?!0:null==t||null==i?!1:(t=e(t),i=e(i),t.length>=i.length&&t.slice(t.length-i.length)===i)},succ:function(t){return null==t?"":(t=e(t),t.slice(0,-1)+e.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=e(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return f.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return f.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return f.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return f.titleize(e(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return f.capitalize(f.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,i){return null==t?"":!i&&n?n.call(t):(i=c(i),e(t).replace(new RegExp("^"+i+"+|"+i+"+$","g"),""))},ltrim:function(t,i){return null==t?"":!i&&s?s.call(t):(i=c(i),e(t).replace(new RegExp("^"+i+"+"),""))},rtrim:function(t,i){return null==t?"":!i&&r?r.call(t):(i=c(i),e(t).replace(new RegExp(i+"+$"),""))},truncate:function(t,i,n){return null==t?"":(t=e(t),n=n||"...",i=~~i,t.length>i?t.slice(0,i)+n:t)},prune:function(t,i,n){if(null==t)return"";if(t=e(t),i=~~i,n=null!=n?e(n):"...",t.length<=i)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},s=t.slice(0,i+1).replace(/.(?=\W*\w*$)/g,r);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):f.rtrim(s.slice(0,s.length-1)),(s+n).length>t.length?t:t.slice(0,s.length)+n},words:function(t,e){return f.isBlank(t)?[]:f.trim(t,e).split(e||/\s+/)},pad:function(t,i,n,r){t=null==t?"":e(t),i=~~i;var s=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",r){case"right":return s=i-t.length,t+a(n,s);case"both":return s=i-t.length,a(n,Math.ceil(s/2))+t+a(n,Math.floor(s/2));default:return s=i-t.length,a(n,s)+t}},lpad:function(t,e,i){return f.pad(t,e,i)},rpad:function(t,e,i){return f.pad(t,e,i,"right")},lrpad:function(t,e,i){return f.pad(t,e,i,"both")},sprintf:p,vsprintf:function(t,e){return e.unshift(t),p.apply(null,e)},toNumber:function(t,e){return t?(t=f.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?o(o(t).toFixed(~~e)):0/0):0},numberFormat:function(t,e,i,n){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),n="string"==typeof n?n:",";var r=t.split("."),s=r[0],o=r[1]?(i||".")+r[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+o},strRight:function(t,i){if(null==t)return"";t=e(t),i=null!=i?e(i):i;var n=i?t.indexOf(i):-1;return~n?t.slice(n+i.length,t.length):t},strRightBack:function(t,i){if(null==t)return"";t=e(t),i=null!=i?e(i):i;var n=i?t.lastIndexOf(i):-1;return~n?t.slice(n+i.length,t.length):t},strLeft:function(t,i){if(null==t)return"";t=e(t),i=null!=i?e(i):i;var n=i?t.indexOf(i):-1;return~n?t.slice(0,n):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var i=t.lastIndexOf(e);return~i?t.slice(0,i):t},toSentence:function(t,e,i,n){e=e||", ",i=i||" and ";var r=t.slice(),s=r.pop();return t.length>2&&n&&(i=f.rtrim(e)+i),r.length?r.join(e)+i+s:s},toSentenceSerial:function(){var t=l.call(arguments);return t[3]=!0,f.toSentence.apply(f,t)},slugify:function(t){if(null==t)return"";var i="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",n="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",r=new RegExp(c(i),"g");return t=e(t).toLowerCase().replace(r,function(t){var e=i.indexOf(t);return n.charAt(e)||"-"}),f.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return f.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,i,n){if(null==t)return"";if(i=~~i,null==n)return a(e(t),i);for(var r=[];i>0;r[--i]=t);return r.join(n)},naturalCmp:function(t,i){if(t==i)return 0;if(!t)return-1;if(!i)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,r=e(t).toLowerCase().match(n),s=e(i).toLowerCase().match(n),o=Math.min(r.length,s.length),a=0;o>a;a++){var l=r[a],c=s[a];if(l!==c){var u=parseInt(l,10);if(!isNaN(u)){var h=parseInt(c,10);if(!isNaN(h)&&u-h)return u-h}return c>l?-1:1}}return r.length===s.length?r.length-s.length:i>t?-1:1},levenshtein:function(t,i){if(null==t&&null==i)return 0;if(null==t)return e(i).length;if(null==i)return e(t).length;t=e(t),i=e(i);for(var n,r,s=[],o=0;o<=i.length;o++)for(var a=0;a<=t.length;a++)r=o&&a?t.charAt(a-1)===i.charAt(o-1)?n:Math.min(s[a],s[a-1],n)+1:o+a,n=s[a],s[a]=r;return s.pop()},toBoolean:function(t,e,n){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=f.trim(t),i(t,e||["true","1"])?!0:i(t,n||["false","0"])?!1:void 0)}};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,f.q=f.quote,f.toBool=f.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return f}),t._=t._||{},t._.string=t._.str=f}(this,String),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){"use strict";t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,i){return e=this.messages[e]||e.toString(),i&&t.each(i,function(t,i){e=e.replace("{"+t+"}",i)}),e},formData:function(t){return t.serializeArray()},add:function(e,i){(i.autoUpload||i.autoUpload!==!1&&t(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var n=t-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;return"function"==typeof e.formData?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(i=[],t.each(e.formData,function(t,e){i.push({name:t,value:e})}),i):[]},_getTotal:function(e){var i=0;return t.each(e,function(t,e){i+=e.size||1}),i},_initProgressObject:function(e){var i={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,i):e._progress=i},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(t,e){if(t.lengthComputable){var i,n=Date.now?Date.now():(new Date).getTime();if(e._time&&e.progressInterval&&n-e._time<e.progressInterval&&t.loaded!==t.total)return;e._time=n,i=Math.floor(t.loaded/t.total*(e.chunkSize||e._progress.total))+(e.uploadedBytes||0),this._progress.loaded+=i-e._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,e.bitrateInterval),e._progress.loaded=e.loaded=i,e._progress.bitrate=e.bitrate=e._bitrateTimer.getBitrate(n,i,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,this._progress)}},_initProgressListener:function(e){var i=this,n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&(t(n.upload).bind("progress",function(t){var n=t.originalEvent;t.lengthComputable=n.lengthComputable,t.loaded=n.loaded,t.total=n.total,i._onProgress(t,e)}),e.xhr=function(){return n})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var i,n=this,r=e.files[0],s=e.multipart||!t.support.xhrFileUpload,o=e.paramName[0];e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),s&&!e.blob&&this._isInstanceOf("File",r)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),s?t.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:o,value:e.blob}):t.each(e.files,function(t,n){i.push({name:e.paramName[t]||o,value:n})})):(n._isInstanceOf("FormData",e.formData)?i=e.formData:(i=new FormData,t.each(this._getFormData(e),function(t,e){i.append(e.name,e.value)})),e.blob?i.append(o,e.blob,r.name):t.each(e.files,function(t,r){(n._isInstanceOf("File",r)||n._isInstanceOf("Blob",r))&&i.append(e.paramName[t]||o,r,r.name)})),e.data=i):(e.contentType=r.type,e.data=e.blob||r),e.blob=null},_initIframeSettings:function(e){var i=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&i&&i!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var i=t(e.fileInput),n=e.paramName;return n?t.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var e=t(this),i=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)n.push(i),r-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var i=t.extend({},this.options,e);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,i,n){var r=t.Deferred(),s=r.promise();return i=i||this.options.context||s,e===!0?r.resolveWith(i,n):e===!1&&r.rejectWith(i,n),s.abort=r.promise,this._enhancePromise(s)},_addConvenienceMethods:function(e,i){var n=this,r=function(e){return t.Deferred().resolveWith(n,[e]).promise()};i.process=function(t,e){return(t||e)&&(i._processQueue=this._processQueue=(this._processQueue||r(this)).pipe(t,e)),this._processQueue||r(this)},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e,this)!==!1&&n._onSend(e,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():n._getXHRPromise()},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),i=e&&e.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(e,i){e.uploadedBytes=e.uploadedBytes||0;var n,r,s=this,o=e.files[0],a=o.size,l=e.uploadedBytes,c=e.maxChunkSize||a,u=this._blobSlice,h=t.Deferred(),d=h.promise();return this._isXHRUpload(e)&&u&&(l||a>c)&&!e.data?i?!0:l>=a?(o.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",o.error])):(r=function(){var i=t.extend({},e),d=i._progress.loaded;i.blob=u.call(o,l,l+c,o.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,s._initXHRData(i),s._initProgressListener(i),n=(s._trigger("chunksend",null,i)!==!1&&t.ajax(i)||s._getXHRPromise(!1,i.context)).done(function(n,o,c){l=s._getUploadedBytes(c)||l+i.chunkSize,d+i.chunkSize-i._progress.loaded&&s._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),e.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=o,i.jqXHR=c,s._trigger("chunkdone",null,i),s._trigger("chunkalways",null,i),a>l?r():h.resolveWith(i.context,[n,o,c])}).fail(function(t,e,n){i.jqXHR=t,i.textStatus=e,i.errorThrown=n,s._trigger("chunkfail",null,i),s._trigger("chunkalways",null,i),h.rejectWith(i.context,[t,e,n])})},this._enhancePromise(d),d.abort=function(){return n.abort()},r(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,i,n,r){var s=r._progress.total,o=r._response;r._progress.loaded<s&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:s,total:s}),r),o.result=r.result=e,o.textStatus=r.textStatus=i,o.jqXHR=r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(t,e,i,n){var r=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),r.jqXHR=n.jqXHR=t,r.textStatus=n.textStatus=e,r.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(t,e,i,n){this._trigger("always",null,n)},_onSend:function(e,i){i.submit||this._addConvenienceMethods(e,i);var n,r,s,o,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((r||a._trigger("send",e,l)===!1)&&a._getXHRPromise(!1,l.context,r)||a._chunkedUpload(l)||t.ajax(l)).done(function(t,e,i){a._onDone(t,e,i,l)}).fail(function(t,e,i){a._onFail(t,e,i,l)}).always(function(t,e,i){if(a._onAlways(t,e,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=t.Deferred(),this._slots.push(s),o=s.pipe(c)):(this._sequence=this._sequence.pipe(c,c),o=this._sequence),o.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(s&&s.rejectWith(l.context,r),c())},this._enhancePromise(o)):c()},_onAdd:function(e,i){var n,r,s,o,a=this,l=!0,c=t.extend({},this.options,i),u=c.limitMultiFileUploads,h=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(s=[],n=[],o=0;o<i.files.length;o+=u)s.push(i.files.slice(o,o+u)),r=h.slice(o,o+u),r.length||(r=h),n.push(r);else n=h;else s=[i.files],n=[h];return i.originalFiles=i.files,t.each(s||i.files,function(r,o){var c=t.extend({},i);return c.files=s?o:[o],c.paramName=n[r],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(e,c),l=a._trigger("add",e,c)}),l},_replaceFileInput:function(e){var i=e.clone(!0);t("<form></form>").append(i)[0].reset(),e.after(i).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,n){return n===e[0]?i[0]:n}),e[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(e,i){var n,r=this,s=t.Deferred(),o=function(t){t&&!t.entry&&(t.entry=e),s.resolve([t])};return i=i||"",e.isFile?e._file?(e._file.relativePath=i,s.resolve(e._file)):e.file(function(t){t.relativePath=i,s.resolve(t)},o):e.isDirectory?(n=e.createReader(),n.readEntries(function(t){r._handleFileTreeEntries(t,i+e.name+"/").done(function(t){s.resolve(t)}).fail(o)},o)):s.resolve([]),s.promise()},_handleFileTreeEntries:function(e,i){var n=this;return t.when.apply(t,t.map(e,function(t){return n._handleFileTreeEntry(t,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var i=e.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var i,n,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(i=t.makeArray(e.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&t.each(i,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(n=e.prop("value"),!n)return t.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return t.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var i=this,n={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(n.fileInput).always(function(t){n.files=t,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",e,n)!==!1&&i._onAdd(e,n)})},_onPaste:function(e){var i=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(t.each(i,function(t,e){var i=e.getAsFile&&e.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e,n)!==!1&&this._onAdd(e,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var e=this,i=t.dataTransfer,n={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,e._trigger("drop",t,n)!==!1&&e._onAdd(t,n)}))},_onDragOver:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var i=e.dataTransfer,n={dropEffect:"copy",preventDefault:!0};i&&-1!==t.inArray("Files",i.types)&&this._trigger("dragover",e,n)!==!1&&(i.dropEffect=n.dropEffect,n.preventDefault&&e.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,i){var n=-1!==t.inArray(e,this._specialOptions);n&&this._destroyEventHandlers(),this._super(e,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),i=e.pop();return e.shift(),new RegExp(e.join("/"),i)},_isRegExpOption:function(e,i){return"url"!==e&&"string"===t.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var e=this,i=this.options;t.each(t(this.element[0].cloneNode(!1)).data(),function(t,n){e._isRegExpOption(t,n)&&(n=e._getRegExp(n)),i[t]=n})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var i=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,i._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var i,n,r=this,s=t.Deferred(),o=s.promise();return o.abort=function(){return n=!0,i?i.abort():(s.reject(null,"abort","abort"),o)},this._getFileInputFiles(e.fileInput).always(function(t){if(!n){if(!t.length)return void s.reject();e.files=t,i=r._onSend(null,e).then(function(t,e,i){s.resolve(t,e,i)},function(t,e,i){s.reject(t,e,i)})}}),this._enhancePromise(o)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),angular.module("Mac").directive("macAffix",function(){return{link:function(t,e,i){var n,r,s,o,a,l,c,u,h;return n={top:0,bottom:0,disabled:!1,classes:"affix affix-top affix-bottom"},a={top:n.top,bottom:n.bottom},l={top:0,left:0},r=n.disabled,o=null,u=null,h=angular.element(window),null!=i.macAffixTop&&(a.top=t.$eval(i.macAffixTop)||n.top,t.$watch(i.macAffixTop,function(t){return null!=t?a.top=t:void 0})),null!=i.macAffixBottom&&(a.bottom=t.$eval(i.macAffixBottom)||n.bottom,t.$watch(i.macAffixBottom,function(t){return null!=t?a.bottom=t:void 0})),(s=function(){return l=e.offset()})(),c=function(){var t,i,r;if(!(e[0].offsetHeight<=0&&e[0].offsetWidth<=0)&&(r=h.scrollTop(),i=angular.element(document).height(),t=null!=u&&r+u<=l.top?!1:l.top+e.height()>=i-a.bottom?"bottom":r<=a.top?"top":!1,t!==o))return o=t,u&&e.css("top",""),e.removeClass(n.classes).addClass("affix"+(t?"-"+t:"")),"bottom"===t?(u=l.top-r,e.css("top",document.body.offsetHeight-a.bottom-e.height())):u=null,!0},null!=i.macAffixDisabled&&(r=t.$eval(i.macAffixDisabled)||n.disabled,t.$watch(i.macAffixDisabled,function(t){var i;if(null!=t&&t!==r)return r=t,i=t?"unbind":"bind",h[i]("scroll",c),r?(o=null,u=null,e.css("top","").removeClass(n.classes)):c()})),r||h.bind("scroll",c),t.$on("refresh-mac-affix",s),t.$on("$destroy",function(){return h.unbind("scroll",c)})}}}),angular.module("Mac").directive("macAutocomplete",["$http","$filter","$compile","$timeout","$parse","$rootScope","keys",function(t,e,i,n,r,s,o){return{restrict:"E",template:'<input type="text"/>',replace:!0,require:"ngModel",link:function(a,l,c,u){var h,d,p,f,m,g,v,_,b,y,w,D,k,x,C,M,S,I,T,A;return _=c.macAutocompleteLabel||"name",M=c.macAutocompleteQuery||"q",m=+(c.macAutocompleteDelay||800),v=null!=c.macAutocompleteInside,p=r(c.macAutocompleteUrl),w=r(c.macAutocompleteOnSelect),k=r(c.macAutocompleteOnSuccess),y=r(c.macAutocompleteOnError),I=r(c.macAutocompleteSource),g=r(c.macAutocompleteDisabled),f=[],T=null,D=!1,h=s.$new(),h.items=[],h.index=0,b=angular.element("<mac-menu></mac-menu>"),b.attr({"mac-menu-items":"items","mac-menu-style":"style","mac-menu-select":"select(index)","mac-menu-index":"index"}),i(b)(h),u.$parsers.push(function(t){return!t||g(a)||D?S():m>0?(null!=T&&n.cancel(T),T=n(function(){return C(t)},m)):C(t),D=!1,t}),d=function(){return v?l.after(b):angular.element(document.body).append(b)},S=function(){return h.items=[],h.index=0,b.remove()},x=function(){return h.items.length>0?(h.style=l.offset(),h.style.top+=l.outerHeight(),h.style.minWidth=l.outerWidth(),angular.forEach(h.style,function(t,e){return!isNaN(+t)&&angular.isNumber(+t)&&(t=""+t+"px"),h.style[e]=t}),d()):void 0},A=function(t){var e,i,n,r,s,o;if(null==t&&(t=[]),t.length>0){for(f=t,h.items=[],o=[],r=0,s=t.length;s>r;r++)e=t[r],i=n=e[_]||e,o.push(h.items.push({label:i,value:n}));return o}},C=function(i){var n,r;return r=p(a),r?(n={method:"GET",url:r,params:{}},n.params[M]=i,t(n).success(function(t,e,i){var n;return n=k(a,{data:t,status:e,headers:i}),null==n&&(n=t.data),A(n),x()}).error(function(t,e,i){return y(a,{data:t,status:e,headers:i})})):(A(e("filter")(I(a),i)),x())},h.select=function(t){var e,i;return i=f[t],w(a,{selected:i}),e=h.items[t].label||"",D=!0,null!=c.ngModel&&(u.$setViewValue(e),u.$render()),S()},l.bind("keydown",function(t){switch(t.which){case o.DOWN:a.$apply(function(){return h.index=(h.index+1)%h.items.length});break;case o.UP:a.$apply(function(){return h.index=(h.index?h.index:h.items.length)-1});break;case o.ENTER:a.$apply(function(){return h.items.length>0?h.select(h.index):void 0});break;case o.ESCAPE:a.$apply(function(){return S()})}return!0}),angular.element(document).bind("click",function(){return h.items.length>0?a.$apply(function(){return S()}):void 0}),a.$on("$destroy",function(){return b.remove()}),a.$on("resetAutocomplete",function(){return S()})}}}]),angular.module("Mac").directive("macCspinner",["util",function(t){return{restrict:"E",replace:"true",template:'<div class="mac-cspinner"></div>',compile:function(e,i){var n,r,s,o,a,l,c,u,h,d,p,f,m,g,v,_,b,y,w,D,k,x,C,M,S,I;if(!window.HTMLCanvasElement)return console.log("Browser does not support canvas");
if(o={width:2,height:5,border:1,radius:4,bars:10,padding:3,speed:100,color:"#2f3035",size:20},p=t.extendAttributes("macCspinner",o,i),null!=i.macCspinnerSize&&(y=!isNaN(+i.macCspinnerSize)&&+i.macCspinnerSize))for(g=y/o.size,S=["width","height","border","radius"],x=0,M=S.length;M>x;x++)f=S[x],p[f]=o[f]*g;for(k=p.width,a=p.height,m=p.border,h=p.radius+a,u=Math.max(k,h),r=Math.ceil(Math.max(u,t.pyth(h,k/2))),r+=p.padding,w=angular.element("<canvas></canvas>"),s=w[0].getContext("2d"),_=t.radian(360/p.bars),s.translate(r,r),D=-h,c=-k/2,v=t.hex2rgb(p.color),l=C=0,I=p.bars-1;I>=0?I>=C:C>=I;l=I>=0?++C:--C)d=1-.8/p.bars*l,s.fillStyle="rgba("+v.r+", "+v.g+", "+v.b+", "+d+")",s.beginPath(),s.moveTo(c+m,D),s.arc(c+k-m,D+m,m,t.radian(-90),t.radian(0),!1),s.arc(c+k-m,D+a-m,m,t.radian(0),t.radian(90),!1),s.arc(c+m,D+a-m,m,t.radian(90),t.radian(180),!1),s.arc(c+m,D+m,m,t.radian(-180),t.radian(-90),!1),s.closePath(),s.fill(),s.rotate(_);return n=angular.element("<canvas></canvas>"),n.attr({width:2*r,height:2*r}),b=n[0].getContext("2d"),b.translate(r,r),e.append(n),function(e,i,n){var s,o,a,l;return s=null,o=!1,l=function(){return o=!1,clearTimeout(s)},a=function(){var e,n;if(!o)return o=!0,n=t.radian(360/p.bars),(e=function(t){return null==t&&(t=!1),b.clearRect(-r,-r,2*r,2*r),b.rotate(n),b.drawImage(w[0],-r,-r),o?!t&&i[0].offsetHeight<=0&&i[0].offsetWidth<=0?l():s=setTimeout(e,p.speed):void 0})(!0)},null!=n.macCspinnerSpin?e.$watch(n.macCspinnerSpin,function(t){return t&&!o?a():!t&&o?l():void 0}):a(),n.ngShow?e.$watch(n.ngShow,function(t){return t?a():l()}):n.ngHide&&e.$watch(n.ngHide,function(t){return t?l():a()}),e.$on("$destroy",function(){return l()})}}}}]),angular.module("Mac").directive("macDatepicker",["$parse","$timeout","util",function(t,e,i){return{restrict:"E",replace:!0,template:'<div class="date-time"><i class="mac-icons mac-icon-calendar"></i><input type="text"/></div>',compile:function(n,r){var s,o,a,l;return s={id:"input-date",appendText:"",autoSize:!1,changeMonth:!1,changeYear:!1,constrainInputType:!0,currentText:"Today",dateFormat:"mm/dd/yy",defaultDate:null,duration:"normal",firstDay:0,maxDate:null,minDate:null,numberOfMonths:1,showOn:"focus",yearRange:"c-10:c+10"},l=i.extendAttributes("macDatepicker",s,r),o={"mac-id":l.id},null!=r.macDatepickerDisabled&&(o["ng-disabled"]=r.macDatepickerDisabled),a=angular.element(n[0].getElementsByTagName("input")),a.attr(o),function(i,n,r){var s,o,c,u,h;return u=t(r.macDatepickerOnSelect),c=t(r.macDatepickerOnClose),o=t(r.macDatepickerModel),s=!1,h=function(t,e){return s&&null!=e?a.datepicker("option",t,e):void 0},null!=r.macDatepickerModel&&i.$watch(r.macDatepickerModel,function(t){return s?e(function(){return a.datepicker("setDate",t)},0,!1):void 0}),null!=r.macDatepickerDefaultDate&&i.$watch(r.macDatepickerDefaultDate,function(t){return h("defaultDate",t)}),null!=r.macDatepickerMaxDate&&i.$watch(r.macDatepickerMaxDate,function(t){return h("maxDate",t)}),null!=r.macDatepickerMinDate&&i.$watch(r.macDatepickerMinDate,function(t){return h("minDate",t)}),l.onSelect=function(t,e){return i.$apply(function(){return"function"==typeof u&&u(i,{date:t,instance:e}),"function"==typeof o.assign?o.assign(i,t):void 0})},l.onClose=function(t,e){return i.$apply(function(){return"function"==typeof c?c(i,{date:t,instance:e}):void 0})},a.datepicker(l),s=!0}}}}]);var event,_fn,_i,_len,_ref;for(_ref=["Blur","Focus","Keydown","Keyup","Mouseenter","Mouseleave"],_fn=function(t){return angular.module("Mac").directive("mac"+t,["$parse",function(e){return{restrict:"A",link:function(i,n,r){var s;return s=e(r["mac"+t]),n.bind(t.toLowerCase(),function(t){return i.$apply(function(){return s(i,{$event:t})}),!0})}}}])},_i=0,_len=_ref.length;_len>_i;_i++)event=_ref[_i],_fn(event);var key,_fn,_i,_len,_ref;for(_ref=["Enter","Escape","Space","Left","Up","Right","Down"],_fn=function(t){return angular.module("Mac").directive("macKeydown"+t,["$parse","keys",function(e,i){return{restrict:"A",link:function(n,r,s){var o;return o=e(s["macKeydown"+t]),r.bind("keydown",function(e){return e.which===i[""+t.toUpperCase()]?(e.preventDefault(),n.$apply(function(){return o(n,{$event:e})})):void 0})}}}])},_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],_fn(key);angular.module("Mac").directive("macPauseTyping",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(i,n,r){var s,o,a;return o=t(r.macPauseTyping),s=i.$eval(r.macPauseTypingDelay)||800,a=null,n.bind("keyup",function(t){return null!=a&&e.cancel(a),a=e(function(){return o(i,{$event:t})},s)})}}}]),angular.module("Mac").directive("macWindowResize",["$parse","$window",function(t,e){return{restrict:"A",link:function(i,n,r){var s;return s=function(e){var n;return n=t(r.macWindowResize),i.$apply(function(){return n(i,{$event:e})}),!0},angular.element(e).bind("resize",s),i.$on("destroy",function(){return angular.element(e).unbind("resize",s)})}}}]),angular.module("Mac").directive("macUpload",["$rootScope","$parse","$timeout","util",function(t,e,i,n){return{require:["macUpload","?macUploadPreviews"],controller:["$scope",function(){}],link:function(t,r,s,o){var a,l,c,u,h,d,p,f,m,g;return g=o[0],f=o[1],l={route:"",dropZone:null,submit:"",success:"",error:"",always:"",progress:"",formData:"",options:""},p=n.extendAttributes("macUpload",l,s),m=function(t,e){return null!=e?r.fileupload("option",t,e):void 0},a=function(i,n,r){var s;return s=e(p[i]),null!=s?t.$apply(function(){var e,i,o,a,l,c,u,h;o=r.jqXHR,i=null!=(u=r.jqXHR)?u.status:void 0,c=(null!=(h=r.jqXHR)?h.responseText:void 0)||"";try{e=JSON.parse(c)}catch(d){l=d,e=c}return a={$event:n,$data:r,$status:i,$xhr:o,$response:e},s(t,a)}):void 0},d={url:e(p.route)(t)||"",replaceFileInput:!1,submit:function(t,e){var i;return i=function(){return a("submit",t,e)},null!=f?f.add(e.files,i):i()},fail:function(t,e){return a("error",t,e)},done:function(t,e){return a("success",t,e)},always:function(t,e){return r.val(""),a("always",t,e)},progress:function(t,e){return null!=f&&"function"==typeof f.updateProgress&&f.updateProgress(e),a("progress",t,e)}},null!=p.dropZone&&(angular.element(document).bind("drop dragover",function(t){return t.preventDefault()}),c=null,u=r.parents(p.dropZone),angular.element(document).bind("dragover",function(t){var e,n;return null!=c&&i.cancel(c),n=angular.element(t.target).parents(p.dropZone),e=n.length?"addClass":"removeClass",u[e]("droppable"),c=i(function(){return null!=c&&clearTimeout(c),u.removeClass("droppable")},250,!1)})),d.dropZone=u||angular.element(),d.pasteZone=null,p.options&&(h=t.$eval(p.options)||{},angular.extend(d,h)),r.fileupload(d).on(["fileuploadadd","fileuploadsubmit","fileuploadsend","fileuploaddone","fileuploadfail","fileuploadalways","fileuploadprogress","fileuploadprogressall","fileuploadstart","fileuploadstop","fileuploadchange","fileuploadpaste","fileuploaddrop","fileuploaddragover","fileuploadchunksend","fileuploadchunkdone","fileuploadchunkfail","fileuploadchunkalways","fileuploadprocessstart","fileuploadprocess","fileuploadprocessdone","fileuploadprocessfail","fileuploadprocessalways","fileuploadprocessstop"].join(" "),function(e,i){return t.$emit(e.type,i)}),t.$watch(p.route,function(t){return m("url",t)}),t.$watch(p.formData,function(t){return m("formData",t)}),t.$watch(p.options,function(t){return r.fileupload("option",t)})}}}]).directive("macUploadPreviews",["$rootScope",function(){return{restrict:"A",require:["macUploadPreviews","macUpload"],controller:["$scope","$attrs","$parse",function(t,e,i){this.previews=function(n){var r,s;return r=i(e.macUploadPreviews),s=r.assign,null!=n?s(t,n):r(t)},this.getByFilename=function(t){var e,i,n,r,s;for(n=this.previews()||[],e=r=s=n.length-1;r>=0;e=r+=-1)if(i=n[e],i.fileName===t)return i},this.add=function(t,e){var i,n,r,s,o,a,l,c=this;for(null==t&&(t=[]),l=[],s=0,o=t.length;o>s;s++)i=t[s],n=function(t){var n,r;return r=this.previews(),null!=r&&(n={fileName:i.name,type:i.type,fileData:null!=t?t.target.result:void 0},r.push(n),this.previews(r)),"function"==typeof e?e(n):void 0},"File"===(null!=(a=i.constructor)?a.name:void 0)?(r=new FileReader,r.onload=function(t){return n.apply(c,[t,"load"])},r.onerror=function(t){return n.apply(c,[t,"error"])},l.push(r.readAsDataURL(i))):l.push(n.apply(this));return l}}],link:function(t,e,i,n){var r;return r=n[0]}}}]).directive("macUploadProgress",[function(){return{restrict:"A",require:["macUploadProgress","?macUploadPreviews"],controller:["$scope",function(){var t;return t=function(t){var e;return e=this.getByFilename(t.files[0].name),null!=e?e.progress=parseInt(t.loaded/t.total*100,10):void 0},this.updatePreviewCtrl=function(e){return e.updateProgress=t}}],link:function(t,e,i,n){var r,s;return s=n[0],r=n[1],null!=s&&"undefined"!=typeof previewCtrl&&null!==previewCtrl&&null!=s?s.updatePreviewCtrl(r):void 0}}}]),angular.module("Mac").directive("macFocusOnEvent",["$timeout",function(t){return function(e,i,n){return e.$on(n.macFocusOnEvent,function(){return t(function(){var t,e;return i.focus(),n.macFocusOnEventScroll?(t=window.scrollX,e=window.scrollY,window.scrollTo(t,e)):void 0},0,!1)})}}]),angular.module("Mac").factory("keys",function(){return{CANCEL:3,HELP:6,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,RETURN:13,SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,SEMICOLON:59,EQUALS:61,COMMAND:91,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,MULTIPLY:106,ADD:107,SEPARATOR:108,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:144,SCROLL_LOCK:145,COMMA:188,PERIOD:190,SLASH:191,BACK_QUOTE:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,QUOTE:222,META:224}}),angular.module("Mac").directive("macMenu",["$parse",function(){return{restrict:"EA",replace:!0,template:'<div ng-class="{\'visible\': items.length}" ng-style="style" class="mac-menu"><ul><li ng-repeat="item in items" ng-click="selectItem($index)" ng-class="{\'active\': $index == index}" mac-mouseenter="setIndex($index)" class="mac-menu-item">{{item.label}}</li></ul></div>',scope:{items:"=macMenuItems",style:"=macMenuStyle",select:"&macMenuSelect",pIndex:"=macMenuIndex"},link:function(t,e,i){return t.selectItem=function(e){return t.select({index:e})},t.setIndex=function(e){return t.index=e,null!=i.macMenuIndex?t.pIndex=parseInt(e):void 0},null!=i.macMenuIndex?t.$watch("pIndex",function(e){return t.index=parseInt(e)}):void 0}}}]),angular.module("Mac").directive("macModal",["$rootScope","$parse","modal","modalViews","util",function(t,e,i,n,r){return{restrict:"E",template:'<div ng-click="closeOverlay($event)" class="modal-overlay hide"><div class="modal"><a ng-click="modal.hide()" class="close-modal"></a><div ng-transclude="ng-transclude" class="modal-content-wrapper"></div></div></div>',replace:!0,transclude:!0,compile:function(){return function(t,s,o){var a,l;return a=r.extendAttributes("macModal",n.defaults,o),l=function(n){return null!=n&&n?(a.callback=function(){return null!=a.open?e(a.open)(t):void 0},i.register(n,s,a)):void 0},t.modal=i,t.closeOverlay=function(t){return a.overlayClose&&angular.element(t.target).hasClass("modal-overlay")?i.hide():void 0},o.id?l(o.id):o.$observe("macModal",function(t){return l(t)})}}}}]).directive("macModal",["$parse","modal",function(t,e){return{restrict:"A",link:function(i,n,r){r.macModal&&n.bind("click",function(){var n,s;return s=!1,null!=r.macModalScope&&r.macModalScope&&(s=t(r.macModalScope)(i)),(null==s||null==s.$new)&&(s=i),n=r.macModalContent||r.macModalData,e.show(r.macModal,{data:t(n)(i),scope:s})})}}}]),angular.module("Mac").directive("macPlaceholder",function(){return{restrict:"A",link:function(t,e,i){return t.$watch(i.macPlaceholder,function(t){return i.$set("placeholder",t)})}}}),angular.module("Mac").directive("macReorderable",["hookableDirectiveController",function(t){return{require:["macReorderable"],controller:["$scope","$element","$attrs",t],link:function(t,e,i,n){var r;return r=i.macReorderable,e.sortable({items:r,cursor:"move",opacity:.8,tolerance:"pointer",update:function(t,i){return n[0].fireCallbacks(t,i,e.find(r))}})}}}]),angular.module("Mac").directive("macReorderableColumns",[function(){return{require:["^macTable","macReorderable"],link:function(t,e,i,n){return n[1].registerCallback(function(e,i,r){var s,o;return o=[],s=$(i.item),r.each(function(){return o.push($(this).scope().cell.column.colName)}),t.$apply(function(){return n[0].table.columnsOrder=o,n[0].table.columnsCtrl.syncOrder()})})}}}]),angular.module("Mac").directive("macResizable",["hookableDirectiveController",function(t){return{require:["macResizable"],controller:["$scope","$element","$attrs",t],link:function(t,e,i,n){var r,s;return r=i.macResizable||"x",s=i.macResizableContainment||"parent",e.resizable({axis:r,containment:s,handles:"e",resize:function(t,e){return n[0].fireCallbacks(t,e)}})}}}]),angular.module("Mac").directive("macResizableColumn",[function(){return{require:["^macColumns","macResizable"],link:function(t,e,i,n){return n[1].registerCallback(function(i,r){var s,o,a;return s=t.cell.column,a=r.size.width,o=a/n[0].element.width()*100,e.css("width",""),t.$apply(function(){return n[0].recalculateWidths(null,t.$id,o,+s.width)})})}}}]),angular.module("Mac").directive("macScrollSpy",["scrollSpy","scrollSpyDefaults","util",function(t,e,i){return{link:function(n,r,s){var o,a;return o=i.extendAttributes("macScrollSpy",e,s),a="BODY"===r[0].tagName?angular.element(window):r,a.bind("scroll",function(){var e,i,s,l,c,u,h;if(c=a.scrollTop()+o.offset,l=this.scrollHeight||r[0].scrollHeight,s=l-a.height(),!t.registered.length)return!0;if(c>=s)return t.setActive(t.last());for(i=u=0,h=t.registered.length-1;h>=0?h>=u:u>=h;i=h>=0?++u:--u)if(e=t.registered,t.active.id!==e[i].id&&c>=e[i].top&&(!e[i+1]||c<=e[i+1].top))return n.$apply(function(){return t.setActive(e[i])}),!0})}}}]).directive("macScrollSpyAnchor",["scrollSpy",function(t){return{compile:function(e,i){var n,r,s;if(n=i.id||i.macScrollSpyAnchor,s=i.id?"id":"macScrollSpyAnchor",!n)throw new Error("Missing scroll spy anchor id");return r=n.match(/{{(.*)}}/),function(e,i,o){var a;return a=function(){return n?(t.register(n,i),e.$on("$destroy",function(){return t.unregister(n)})):void 0},e.$on("refresh-scroll-spy",a),r?o.$observe(s,function(t){return n=t,a()}):a()}}}}]).directive("macScrollSpyTarget",["scrollSpy",function(t){return{compile:function(e,i){var n,r,s;if(s=i.macScrollSpyTarget,n=i.macScrollSpyTargetClass||"active",!s)throw new Error("Missing scroll spy target name");return r=s.match(/{{(.*)}}/),function(e,i,o){var a;return a=function(r){var s;if(r)return s=function(t){var e;return e=r===t.id?"addClass":"removeClass",i[e](n)},null!=t.active&&s(t.active),t.addListener(s),e.$on("$destroy",function(){return t.removeListener(s)})},r?o.$observe("macScrollSpyTarget",function(t){return a(t)}):a(s)}}}}]),angular.module("Mac").directive("macSpinner",["util",function(t){return{restrict:"E",replace:!0,template:'<div class="mac-spinner"></div>',compile:function(e){var i,n,r,s,o,a,l,c;for(o=["webkit","Moz","ms","O"],l=function(e,i){var n,r,s;for(i=t.capitalize(i),r=0,s=o.length;s>r;r++)if(n=o[r],null!=e.style[n+i])return n+i;return i},s=c=0;9>=c;s=++c)r=.1*s-1+!s,n=36*s,a={},i=angular.element('<div class="bar"></div>'),a[l(i[0],"animation")]="fade 1s linear infinite "+r+"s",a[l(i[0],"transform")]="rotate("+n+"deg) translate(0, 130%)",i.css(a),e.append(i);return function(t,e,i){var n,r,s;return r={size:16,zIndex:"inherit",color:"#2f3035"},n=angular.element(e[0].getElementsByClassName("bar")),s=function(t){return n.css({height:.32*t+"px",left:.445*t+"px",top:.37*t+"px",width:.13*t+"px",borderRadius:.32*t*2+"px",position:"absolute"}),!isNaN(+t)&&angular.isNumber(+t)&&(t=""+t+"px"),e.css({height:t,width:t})},null!=i.macSpinnerSize?i.$observe("macSpinnerSize",function(t){return null!=t&&t?s(t):void 0}):s(r.size),i.$observe("macSpinnerZIndex",function(t){return null!=t&&t?e.css("z-index",t):void 0}),null!=i.macSpinnerColor?i.$observe("macSpinnerColor",function(t){return null!=t&&t?n.css("background",t):void 0}):n.css("background",r.color)}}}}]),angular.module("Mac").factory("macColumnsController",function(){var t;return t=function(){function t(t,e,i){this.scope=t,this.element=e,this.attrs=i,this.trackedColumns={}}return t.prototype.getSiblingScopes=function(t){var e,i,n,r,s;for(i=[],r=0,s=t.length;s>r;r++)e=t[r],n=angular.element(e).scope(),null!=this.trackedColumns[n.$id]&&i.push(n);return i},t.prototype.recalculateWidths=function(t,e,i,n){var r,s,o,a,l,c,u,h,d,p,f,m,g,v,_;if(!isNaN(i)&&!isNaN(n)){for(v=this.trackedColumns[e],s=v[0],r=v[1],o=this.getSiblingScopes(r.nextAll()),c=(n-i)/o.length,a={},h=0,p=0,m=o.length;m>p;p++)u=o[p],d=+u.cell.column.width+c,5>d&&(d=5),a[u.$id]=d,h+=d;if(l=this.getSiblingScopes(r.prevAll()),h+=l.reduce(function(t,e){return+e.cell.column.width+t},0),100>=h+i){for(s.cell.column.width=i,_=[],f=0,g=o.length;g>f;f++)u=o[f],_.push(u.cell.column.width=a[u.$id]);return _}}},t}()}),angular.module("Mac").directive("macColumns",["macColumnsController",function(t){return{require:["^macTable","^macTableSection","macTableRow","macColumns"],controller:["$scope","$element","$attrs",t],link:function(t,e,i,n){return t.$on("mac-columns-"+t.$id+"-changed",function(){return n[3].recalculateWidths.apply(n[3],arguments)})}}}]),angular.module("Mac").directive("macColumnWidth",[function(){return{require:["^macTable","^macTableSection","^macTableRow","^macColumns"],priority:500,compile:function(){return function(t,e,i,n){return n[3].trackedColumns[t.$id]=[t,e],i.$observe("macColumnWidth",function(e){return t.cell.column.width?void 0:t.cell.column.width=+e.replace("%","")})}}}}]),angular.module("Mac").directive("macCellTemplate",[function(){return{transclude:"element",priority:1e3,require:["^macTable","^macTableSection","^macTableRow"],compile:function(t,e,i){return function(t,e,n,r){var s,o,a,l,c;for(o=n.macCellTemplate?n.macCellTemplate.split(" "):["?"],c=[],a=0,l=o.length;l>a;a++)s=o[a],c.push(r[1].cellTemplates[s]=[e,i,n]);return c}}}}]),angular.module("Mac").factory("MacTableRowController",["directiveHelpers",function(t){var e;return e=function(){function e(){}return e.prototype.repeatCells=function(e,i,n){var r;return i.children().remove(),r=function(t){var e,i;return i=t.column.colName in n.cellTemplates?t.column.colName:"?",(e=n.cellTemplates[i])?e[1]:void 0},t.repeater(e,"cell",i.scope(),i,r)},e}()}]),angular.module("Mac").directive("macTableRow",["MacTableRowController",function(t){return{require:["^macTable","^macTableSection","macTableRow"],controller:t,compile:function(){return function(t,e,i,n){return t.$watch("row.cells",function(t){var i;if(null!=(null!=(i=n[1].section)?i.name:void 0))return n[2].repeatCells(t,e,n[1])})}}}}]),angular.module("Mac").directive("macTableSection",function(){var t;return t=function(){function t(t,e){this.scope=t,this.attrs=e,this.name=null,this.section=null,this.cellTemplates={},this.watchers={}}return t.prototype.registerWatcher=function(t,e){return this.watchers[t]=e},t.prototype.applyWatchers=function(){var t,e,i,n,r=this;i=this.watchers,n=[];for(e in i)t=i[e],n.push(function(t,e){return r.attrs.$observe(t,function(t){return e.watch(t,r.name)})}(e,t));return n},t}(),{require:["^macTable","macTableSection"],scope:!0,controller:["$scope","$attrs",t],compile:function(){return function(t,e,i,n){return i.$observe("macTableSection",function(e){return e?(n[1].name=e,t.$watch("table",function(i){return i?(t.$watch("table.sections."+e,function(){return t.section=n[1].section=t.table.sections[e]}),n[1].applyWatchers()):void 0})):void 0})}}}}),angular.module("Mac").directive("macTableSectionBlankRow",function(){var t;return t=function(){function t(t){this.scope=t}return t.prototype.watch=function(t,e){var i,n,r=this;return n=t||"body",i=this.scope.$watch("table.sections."+n+".rows",function(t){return t?(i(),r.scope.$watch("table.columnsOrder",function(){return e in r.scope.table.sections&&r.scope.table.clear(e),r.scope.table.load(e),r.scope.table.insert(e,r.scope.table.blankRow())})):void 0})},t}(),{require:["^macTable","macTableSection","macTableSectionBlankRow"],controller:["$scope",t],link:function(t,e,i,n){return n[1].registerWatcher("macTableSectionBlankRow",n[2])}}}),angular.module("Mac").directive("macTableSectionModels",["$parse",function(t){var e;return e=function(){function e(t){this.scope=t}return e.prototype.watch=function(e,i){var n,r=this;return n="",this.scope.$watch(function(){var s,o;return o=t(e)(r.scope),angular.isArray(o)?(s=JSON.stringify(o),s!==n?(n=s,r.models=o,r.scope.table.load(i,o),s):void 0):void 0})},e}(),{require:["^macTable","macTableSection","macTableSectionModels"],controller:["$scope",e],link:function(t,e,i,n){return n[1].registerWatcher("macTableSectionModels",n[2])}}}]),angular.module("Mac").directive("macTableSectionController",function(){var t;return t=function(){function t(t){this.scope=t}return t.prototype.watch=function(t,e){var i=this;return this.scope.$watch(t,function(t){return t?(i.controller=t,i.scope.table.load(e,null,t)):void 0})},t}(),{require:["^macTable","macTableSection","macTableSectionController"],controller:["$scope",t],link:function(t,e,i,n){return n[1].registerWatcher("macTableSectionController",n[2])}}});var __indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("Mac").directive("macTableSectionSelectedModels",["$parse",function(t){var e;return e=function(){function e(e,i,n){this.scope=e,this.element=i,this.attrs=n,this.rangeModel=t(this.attrs.macTableSectionSelectedModels)}return e.prototype.watch=function(t,e){var i=this;return this.sectionName=e,this.scope.$watch(t,function(t){var e,n,r,s;if(null!=i.scope.table.sections[i.sectionName]){for(null==t&&(t=[]),i.unselectAll(),r=0,s=t.length;s>r;r++)e=t[r],(n=i.findRowForModel(e))&&(n.selected=!0);return t=i.removeModelsNotInTable(t),i.setModel(t)}}),this.scope.$watch("table.sections."+e+".rows.length",function(){var t;return t=i.removeModelsNotInTable(i.getModel()),i.setModel(t)})},e.prototype.removeModelsNotInTable=function(t){var e,i,n,r,s,o,a;for(n=[],e=r=0,o=t.length;o>r;e=++r)i=t[e],this.findRowForModel(i)||n.push(e);for(n.reverse(),s=0,a=n.length;a>s;s++)e=n[s],t.splice(e,1);return t},e.prototype.findRowForModel=function(t){var e,i,n,r;for(r=this.getSectionRows(),i=0,n=r.length;n>i;i++)if(e=r[i],e.model===t)return e},e.prototype.setModel=function(t){return this.rangeModel.assign(this.scope,t)},e.prototype.getModel=function(){return this.rangeModel(this.scope).slice(0)},e.prototype.getSectionRows=function(){return this.scope.table.sections[this.sectionName].rows},e.prototype.unselectAll=function(){var t,e,i,n,r,s;for(r=this.getSectionRows(),s=[],t=i=0,n=r.length;n>i;t=++i)e=r[t],s.push(e.selected=!1);return s},e}(),{controller:["$scope","$element","$attrs",e],require:["^macTable","macTableSection","macTableSectionSelectedModels"],compile:function(){return function(t,e,i,n){return n[1].registerWatcher("macTableSectionSelectedModels",n[2])}}}}]),angular.module("Mac").directive("macTableSelectable",["$document","keys",function(t,e){var i,n,r;return r=!1,n=!1,t.bind("keydown",function(t){return t.which===e.SHIFT&&(r=!0),t.which===e.COMMAND?n=!0:void 0}),t.bind("keyup",function(t){return t.which===e.SHIFT&&(r=!1),t.which===e.COMMAND?n=!1:void 0}),i=function(){function e(t,e,i){this.scope=t,this.element=e,this.attrs=i}return e.prototype.getIndexOfFirstSelected=function(){var t,e,i,n,r;for(r=this.parentController.getSectionRows(),t=i=0,n=r.length;n>i;t=++i)if(e=r[t],e.selected)return t},e.prototype.selectAllBetween=function(t,e){var i,n;return n=this.parentController.getSectionRows().slice(t,e+1),this.parentController.setModel(function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.model);return r}())},e.prototype.selectRow=function(e){var i=this;return t[0].getSelection().removeAllRanges(),this.scope.$apply(function(){var t,s,o,a,l;if(n)return t=i.parentController.getModel(),a=e.model,i.parentController.setModel(__indexOf.call(t,a)>=0?t.filter(function(t){return t!==e.model}):t.concat([e.model]));if(!r)return t=i.parentController.getModel(),t.length>1?i.parentController.setModel([e.model]):(l=e.model,i.parentController.setModel(__indexOf.call(t,l)>=0?[]:[e.model]));if(s=i.getIndexOfFirstSelected(),o=i.parentController.getSectionRows().indexOf(e),s===o);else{if(o>s)return i.selectAllBetween(s,o);if(s>o)return i.selectAllBetween(o,s)}})},e}(),{require:["^macTable","^macTableSectionSelectedModels","macTableSelectable"],controller:["$scope","$element","$attrs",i],link:function(t,e,i,n){return n[2].parentController=n[1],e.on("click",function(){return t.$eval(i.macTableSelectable)?n[2].selectRow(t.row):void 0})}}}]),angular.module("Mac").factory("MacTableController",["Table",function(t){var e;return e=function(){function e(t){this.scope=t}return e.prototype.hasResizableColumns=!1,e.prototype.hasReorderableColumns=!1,e.prototype.makeTable=function(e){return this.table=this.scope.table=new t(e)},e}()}]),angular.module("Mac").directive("macTable",["MacTableController",function(t){return{require:"macTable",scope:!0,controller:["$scope",t],compile:function(t,e){var i,n,r,s,o;return n=t.find("[mac-table-section=header]"),t.find("[mac-column-width]").attr("width","{{cell.column.width}}%").parents("[mac-table-row]").attr("mac-columns",""),t.find("[mac-cell-template]").wrapInner("<div class='cell-wrapper' />").attr("data-column-name","{{cell.column.colName}}"),null!=e.macTableResizableColumns&&n.find("[mac-cell-template]").find(".cell-wrapper").attr("mac-resizable-column","").attr("mac-resizable","").attr("mac-resizable-containment","document"),null!=e.macTableReorderableColumns&&n.find("[mac-table-row]").attr("mac-reorderable","[mac-cell-template]").attr("mac-reorderable-columns",""),t.find("[mac-table-row]").not("[mac-table-row][ng-repeat]").attr("ng-repeat","row in section.rows"),i=n.find("[mac-column-width=auto]"),i.length&&(o=n.find("[mac-column-width]").not("[mac-column-width=auto]"),s=100,o.each(function(){return s-=+$(this).attr("mac-column-width").replace("%","")}),r="{{"+s+" / (table.columns.length - "+o.length+")}}%",i.attr("mac-column-width",r)),function(t,e,i,n){return n.$element=e,i.$observe("macTableColumns",function(e){return"dynamic"===e?n.makeTable("dynamic"):t.$watch(e,function(t){return n.makeTable(t)},!0)})}}}}]);var __indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("Mac").directive("macTagAutocomplete",["$parse","$timeout","keys","util",function(t,e,i,n){return{restrict:"E",template:'<div ng-click="focusTextInput()" class="mac-tag-autocomplete"><ul class="tag-list"><li ng-repeat="tag in selected" class="tag label"><div ng-click="selected.splice($index, 1)" class="tag-close">&times;</div><span class="tag-label">{{getTagLabel(tag)}}</span></li><li ng-class="{\'fullwidth\': !selected.length}" class="tag input-tag"><mac-autocomplete ng-model="textInput" mac-autocomplete-disabled="disabled" mac-autocomplete-on-select="onSelect(selected)" mac-autocomplete-on-success="onSuccess(data)" mac-placeholder="autocompletePlaceholder" mac-keydown="onKeyDown($event)" class="text-input mac-autocomplete"></mac-autocomplete></li></ul></div>',replace:!0,scope:{url:"=macTagAutocompleteUrl",placeholder:"=macTagAutocompletePlaceholder",selected:"=macTagAutocompleteSelected",source:"=macTagAutocompleteSource",disabled:"=macTagAutocompleteDisabled",model:"=macTagAutocompleteModel",onEnter:"&macTagAutocompleteOnEnter",onKeydown:"&macTagAutocompleteOnKeydown"},compile:function(r,s){var o,a,l,c,u,h,d;return d=s.macTagAutocompleteValue,null==d&&(d="id"),l=s.macTagAutocompleteLabel,null==l&&(l="name"),c=s.macTagAutocompleteQuery||"q",a=+s.macTagAutocompleteDelay||800,h=!1,u=angular.element(r[0].getElementsByClassName("mac-autocomplete")),o={"mac-autocomplete-value":d,"mac-autocomplete-label":l,"mac-autocomplete-query":c,"mac-autocomplete-delay":a},null!=s.macTagAutocompleteUrl?o["mac-autocomplete-url"]="url":null!=s.macTagAutocompleteSource&&(h=!0,o["mac-autocomplete-source"]="autocompleteSource"),u.attr(o),function(r,s,o){var a;return r.textInput="",r.autocompleteSource=[],null!=o.macTagAutocompleteModel&&(r.$watch("textInput",function(t){return r.model=t}),r.$watch("model",function(t){return r.textInput=t})),r.focusTextInput=function(){var t;return t=s[0].getElementsByClassName("mac-autocomplete"),t[0].focus()},r.getTagLabel=function(t){return l?t[l]:t},e(function(){var e,i,a,l,c,h,d,p;if(a=o.macTagAutocompleteEvents){for(u=angular.element(s[0].getElementsByClassName("text-input")),d=a.split(","),p=[],c=0,h=d.length;h>c;c++)l=d[c],e=n.capitalize(l),i=o["macTagAutocompleteOn"+e],i&&"keydown"!==l&&p.push(function(e,i){return u.bind(e,function(e){var n;return n=t(i),r.$apply(function(){var t;return t=r.textInput,n(r.$parent,{$event:e,item:t})})})}(l,i));return p}},0),a=function(){var t,e,i,n,s;return r.autocompletePlaceholder=(null!=(s=r.selected)?s.length:void 0)?"":r.placeholder,h?(n=function(){var t,i,n,s;for(n=r.source||[],s=[],t=0,i=n.length;i>t;t++)e=n[t],s.push(e[d]);return s}(),i=function(){var t,i,n,s;for(n=r.selected||[],s=[],t=0,i=n.length;i>t;t++)e=n[t],s.push(e[d]);return s}(),t=function(){var t,r,s;for(s=[],t=0,r=n.length;r>t;t++)e=n[t],__indexOf.call(i,e)<0&&s.push(e);return s}(),r.autocompleteSource=function(){var i,n,s,o,a;for(s=r.source||[],a=[],i=0,n=s.length;n>i;i++)e=s[i],o=e[d],__indexOf.call(t,o)>=0&&a.push(e);return a}()):void 0},h&&r.$watch("source",a,!0),r.$watch("selected",a,!0),r.onKeyDown=function(t){var e,n;switch(e=t.which||t.keyCode){case i.BACKSPACE:r.textInput||"function"==typeof(n=r.selected).pop&&n.pop();break;case i.ENTER:r.textInput.length>0&&r.disabled&&r.onSelect(r.textInput)}return null!=o.macTagAutocompleteOnKeydown&&"function"==typeof r.onKeydown&&r.onKeydown({$event:t,value:r.textInput}),!0},r.onSuccess=function(t){var e,i;return e=function(){var t,e,n,s;for(n=r.selected||[],s=[],t=0,e=n.length;e>t;t++)i=n[t],s.push(i[d]);return s}(),function(){var n,r,s,o,a;for(s=t.data,a=[],n=0,r=s.length;r>n;n++)i=s[n],o=i[d]||i,__indexOf.call(e,o)<0&&a.push(i);return a}()},r.onSelect=function(t){return null!=o.macTagAutocompleteOnEnter&&(t=r.onEnter({item:t})),t&&r.selected.push(t),e(function(){return r.textInput=""},0)},r.$on("mac-tag-autocomplete-clear-input",function(){return r.textInput=""})}}}}]),angular.module("Mac").directive("macTagInput",[function(){return{restrict:"E",template:'<div class="mac-tag-input"><mac-tag-autocomplete mac-tag-autocomplete-source="items" mac-tag-autocomplete-selected="selected" mac-tag-autocomplete-placeholder="placeholder" mac-tag-autocomplete-full-object="mac-tag-autocomplete-full-object" class="tag-autocomplete"></mac-tag-autocomplete></div>',transclude:!0,replace:!0,scope:{selected:"=macTagInputSelected",items:"=macTagInputTags"},compile:function(t,e){var i,n;return n=e.macTagInputValue||"id",i=e.macTagInputLabel||"name",angular.element(t[0].getElementsByClassName("mac-autocomplete")).attr({"mac-tag-autocomplete-value":n,"mac-tag-autocomplete-label":i}),function(t,e,i){return t.placeholder=i.macTagInputPlaceholder||""}}}}]),angular.module("Mac").directive("macTime",["$filter","$timeout","util","keys",function(t,e,i,n){return{restrict:"E",scope:{model:"=macTimeModel",disabled:"=macTimeDisabled"},replace:!0,template:'<div class="date-time"><i class="mac-icons mac-icon-time"></i><input type="text" mac-placeholder="placeholder" maxlength="8" ng-model="model" ng-disabled="disabled" ng-click="updateInput()" mac-keydown="keydownEvent($event)" mac-keyup="keyupEvent($event)"/></div>',compile:function(r,s){var o,a;
return o={placeholder:"--:--","default":"12:00 AM"},a=i.extendAttributes("macTime",o,s),function(i,r){var s,o,l,c,u;return i.placeholder=a.placeholder,o=r[0].getElementsByTagName("input")[0],u=/(\d+):(\d+) ([AP]M)/,s={hours:function(){return o.setSelectionRange(0,2)},minutes:function(){return o.setSelectionRange(3,5)},markers:function(){return o.setSelectionRange(6,8)}},c=function(){var t,e;return t="Jan 1, 1970, ",e=new Date(t+a["default"]),isNaN(e.getTime())&&(e=new Date(t+"12:00 AM")),i.time=e},c(),i.$watch("model",function(t){return null!=t&&t?i.updateScopeTime():c()}),l=function(t,e,i){return null==e&&(e=t),null==i&&(i={}),"object"==typeof e&&(i=e,e=t),t>=0&&3>t&&e>=0&&3>e?"function"==typeof i.hours&&i.hours():t>=3&&6>t&&e>=3&&6>e?"function"==typeof i.minutes&&i.minutes():t>=6&&9>t&&t>=6&&9>t&&"function"==typeof i.markers&&i.markers(),"function"==typeof i.all?i.all():void 0},i.updateInput=function(n){var r,a;return null==n&&(n={}),a=o.selectionStart,r=o.selectionEnd,n!=={}&&l(a,r,n),i.model=t("date")(i.time.getTime(),"hh:mm a"),e(function(){return l(a,r,s)},0,!1)},i.updateScopeTime=function(){var t,e,n,r;return(r=u.exec(i.model))?(t=+r[1],n=+r[2],e=r[3]||"AM",t>0&&12>=t&&n>=0&&60>=n?("PM"===e&&12!==t&&(t+=12),"AM"===e&&12===t&&(t=0),i.time.setHours(t,n)):i.updateInput()):i.updateInput()},i.keydownEvent=function(t){var e,r,s,a;switch(s=t.which){case n.UP:case n.DOWN:return t.preventDefault(),e=s===n.UP?1:-1,i.updateInput({hours:function(){return i.time.setHours(i.time.getHours()+e)},minutes:function(){return i.time.setMinutes(i.time.getMinutes()+e)},markers:function(){return i.time.setHours(i.time.getHours()+12*e)}});case n.LEFT:case n.RIGHT:return t.preventDefault(),e=s===n.LEFT?-3:3,a=o.selectionStart,r=o.selectionEnd,l(a,r,{hours:function(){return s===n.LEFT?e=0:void 0},markers:function(){return s===n.RIGHT?e=0:void 0},all:function(){return a+=e,r+=e}}),o.setSelectionRange(a,r),i.updateInput()}},i.keyupEvent=function(t){var e;return e=t.which,n.NUMPAD0<=e&&e<=n.NUMPAD9||n.ZERO<=e&&e<=n.NINE?i.updateScopeTime():void 0}}}}}]),angular.module("Mac").directive("macTooltip",["$timeout","util",function(t,e){return{restrict:"A",link:function(i,n,r){var s,o,a,l,c,u,h,d,p;return p=null,h="",a=!1,o=!1,s={direction:"top",trigger:"hover",inside:!1},l=e.extendAttributes("macTooltip",s,r),u=function(){var t,e,i,r;if(o||!h)return!0;switch(i=l.inside?n:angular.element(document.body),p=angular.element('<div class="tooltip '+l.direction+'"><div class="tooltip-message">'+h+"</div></div>"),i.append(p),e=l.inside?{top:0,left:0}:n.offset(),t={width:n.outerWidth(),height:n.outerHeight()},r={width:p.outerWidth(),height:p.outerHeight()},l.direction){case"bottom":case"top":e.left+=t.width/2-r.width/2;break;case"left":case"right":e.top+=t.height/2-r.height/2}switch(l.direction){case"bottom":e.top+=t.height;break;case"top":e.top-=r.height;break;case"left":e.left-=r.width;break;case"right":e.left+=t.width}return e.top=Math.max(0,e.top),e.left=Math.max(0,e.left),angular.forEach(e,function(t,e){return!isNaN(+t)&&angular.isNumber(+t)&&(t=""+t+"px"),p.css(e,t)}),p.addClass("visible"),!0},c=function(){return null!=p&&(p.removeClass("visible"),t(function(){return p.remove()},100,!1)),!0},d=function(t){return null!=p?c(t):u(t)},r.$observe("macTooltip",function(t){var e;if(null!=t&&(h=t,!a)){if("hover"!==(e=l.trigger)&&"click"!==e)throw"Invalid trigger";switch(l.trigger){case"click":n.bind("click",d);break;case"hover":n.bind("mouseenter",u),n.bind("mouseleave click",c)}return a=!0}}),null!=r.macTooltipDisabled&&i.$watch(r.macTooltipDisabled,function(t){return o=t}),i.$on("$destroy",function(){return null!=p?c():void 0})}}}]),angular.module("Mac").filter("boolean",function(){return function(t,e,i){return null==e&&(e="true"),null==i&&(i="false"),t?e:i}}),angular.module("Mac").filter("true",function(){return function(t,e){return null==e&&(e="true"),t?e:""}}),angular.module("Mac").filter("false",function(){return function(t,e){return null==e&&(e="false"),t?"":e}}),angular.module("Mac").filter("list",[function(){return function(t,e){return null==e&&(e=", "),t.join(e)}}]),angular.module("Mac").filter("pluralize",["util",function(t){return function(e,i,n){return null==n&&(n=!0),t.pluralize(e,i,n)}}]),angular.module("Mac").filter("timestamp",["util",function(t){var e;return e=function(e,i){return i=t.pluralize(i,e),""+e+" "+i+" ago"},function(t){var i,n,r,s,o,a,l,c;return t=+t,i=Math.round(Date.now()/1e3),a=i-t,45>a?"just now":120>a?"about a minute ago":(c=Math.floor(a/31536e3),c>0?e(c,"year"):(o=Math.floor(a/2678400),o>0?e(o,"month"):(l=Math.floor(a/604800),l>0?e(l,"week"):(n=Math.floor(a/86400),n>0?e(n,"day"):(r=Math.floor(a/3600),r>0?e(r,"hour"):(s=Math.floor(a/60),s>0?e(s,"min"):""+a+" seconds ago"))))))}}]);var __slice=[].slice;angular.module("Mac").filter("underscoreString",function(){return function(){var t,e,i;return i=arguments[0],t=arguments[1],e=3<=arguments.length?__slice.call(arguments,2):[],e.unshift(i),_.string[t].apply(this,e)}}),angular.module("Mac").factory("directiveHelpers",[function(){return{repeater:function(t,e,i,n,r,s){var o,a,l,c,u,h,d;if(n.length){for(d=[],u=0,h=t.length;h>u;u++)a=t[u],c=i.$new(),c[e]=a,(l=r(a))?(o=l(c,function(t){return n[0].appendChild(t[0])}),d.push(s&&s(a,o))):d.push(void 0);return d}}}}]);var __slice=[].slice;angular.module("Mac").factory("hookableDirectiveController",[function(){var t;return t=function(){function t(t,e,i){this.scope=t,this.element=e,this.attrs=i,this._callbacks=[]}return t.prototype.registerCallback=function(t){return this._callbacks.push(t)},t.prototype.fireCallbacks=function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],this._callbacks.forEach(function(e){return e.apply(null,t)})},t}()}]),angular.module("Mac").service("modal",["$rootScope","$timeout","$templateCache","$compile","$http","$controller","modalViews","keys",function(t,e,i,n,r,s,o,a){return{registered:o.registered,waiting:null,opened:null,modalTemplate:'<div ng-click="closeOverlay($event)" class="modal-overlay hide"><div class="modal"><a ng-click="modal.hide()" class="close-modal"></a><div class="modal-content-wrapper"></div></div></div>',show:function(o,a){var l,c,u,h,d,p,f=this;if(null==a&&(a={}),null!=this.registered[o]&&null!=this.opened)return this.hide();if(null==this.registered[o])return this.waiting={id:o,options:a};if(l=this.registered[o],c=l.options,angular.extend(c,a),d=function(i){return i.removeClass("hide"),e(function(){return i.addClass("visible")},0,!1),f.opened={id:o,element:i,options:c},f.resize(f.opened),f.bindingEvents(),"function"==typeof c.callback&&c.callback(),t.$broadcast("modalWasShown",o),f.clearWaiting()},null!=c.moduleMethod){if(h=function(e,i){var r,a,l;return null==i&&(i=!0),a=c.scope?c.scope.$new():t.$new(!0),a.modal=f,a.closeOverlay=function(t){return c.overlayClose&&angular.element(t.target).hasClass("modal-overlay")?f.hide():void 0},c.controller&&s(c.controller,{$scope:a}),angular.extend(c.attributes,{id:o}),r=angular.element(f.modalTemplate).attr(c.attributes),l=angular.element(r[0].getElementsByClassName("modal-content-wrapper")),l.html(e),angular.element(document.body).append(n(r)(a)),d(r),i?t.$apply():void 0},u=c.templateUrl)return p=i.get(u),p?h(p):r.get(u).then(function(t){return i.put(u,t.data),h(t.data,!1)},function(){throw Error("Failed to load template: "+u)});if(p=c.template)return h(p)}else if(null!=l.element)return d(l.element)},resize:function(t){var e,i,n,r,s,o;return null==t&&(t=this.opened),null!=t?(i=t.element,s=t.options,r=angular.element(i[0].getElementsByClassName("modal")).attr("style",""),n=r.outerHeight(),o=r.outerWidth(),e=angular.element(window).height()>n?{marginTop:-n/2}:{top:s.topOffset},e.marginLeft=-o/2,angular.forEach(e,function(t,e){return!isNaN(+t)&&angular.isNumber(+t)&&(t=""+t+"px"),r.css(e,t)})):void 0},hide:function(i){var n,r,s,o;if(null!=this.opened)return o=this.opened,r=o.id,s=o.options,n=o.element,n.removeClass("visible"),e(function(){return n.addClass("hide")},250,!1),this.bindingEvents("unbind"),this.opened=null,s.moduleMethod&&(n.scope().$destroy(),n.remove()),t.$broadcast("modalWasHidden",r),"function"==typeof i?i():void 0},bindingEvents:function(t){var e,i,n,r=this;return null==t&&(t="bind"),"bind"!==t&&"unbind"!==t||null==this.opened?void 0:(e=function(t){return t.which===a.ESCAPE?r.hide():void 0},n=function(){return r.resize()},i=this.opened.options,i.keyboard&&angular.element(document)[t]("keydown",e),i.resize?angular.element(window)[t]("resize",n):void 0)},register:function(t,e,i){if(null!=this.registered[t])throw new Error("Modal "+t+" already registered");return this.registered[t]={id:t,element:e,options:i},null!=this.waiting&&this.waiting.id===t?this.show(t,this.waiting.options):void 0},unregister:function(t){var e;if(null==this.registered[t])throw new Error("Modal "+t+" is not registered");return(null!=(e=this.opened)?e.id:void 0)===t&&this.hide(),this.clearWaiting(t),delete this.registered[t]},clearWaiting:function(t){var e;if(null==t||(null!=(e=this.waiting)?e.id:void 0)===t)return this.waiting=null}}}]).provider("modalViews",function(){return this.registered={},this.defaults={keyboard:!1,overlayClose:!1,resize:!0,open:null,topOffset:20,attributes:{}},this.$get=function(){return this},this}).config(["modalViewsProvider",function(t){return angular.module("Mac").modal=function(e,i){var n;return null==t.registered[e]?(n={},angular.extend(n,t.defaults,i,{moduleMethod:!0}),t.registered[e]={id:e,options:n}):void 0}}]),angular.module("Mac").service("scrollSpy",[function(){return{registered:[],active:{},listeners:[],register:function(t,e){var i,n,r,s,o,a,l;for(r=!1,s=e.offset().top,l=this.registered,n=o=0,a=l.length;a>o;n=++o)if(i=l[n],i.id===t){this.registered[n]={id:t,element:e,top:s},r=!0;break}return r||this.registered.push({id:t,element:e,top:s}),this.registered.sort(function(t,e){return t.top>e.top?1:t.top<e.top?-1:0})},unregister:function(t){var e,i,n,r,s,o,a;for(s=this.registered,a=[],i=n=0,r=s.length;r>n;i=++n)if(e=s[i],e.id===t){[].splice.apply(this.registered,[i,i-i+1].concat(o=[])),o;break}return a},last:function(){return this.registered[this.registered.length-1]},setActive:function(t){var e,i,n,r,s;for(this.active=t,r=this.listeners,s=[],i=0,n=r.length;n>i;i++)e=r[i],s.push(e(t));return s},addListener:function(t){return this.listeners.push(t)},removeListener:function(t){var e,i;return e=this.listeners.indexOf(t),-1!==e?([].splice.apply(this.listeners,[e,e-e+1].concat(i=[])),i):void 0}}}]).constant("scrollSpyDefaults",{offset:0});var __indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("Mac").factory("TableSectionController",[function(){var t;return t=function(){function t(t){this.section=t}return t.prototype.cellValue=function(t,e){return this.defaultCellValue(t,e)},t.prototype.defaultCellValue=function(t,e){return t.model[e]},t}()}]),angular.module("Mac").factory("TableRow",function(){var t;return t=function(){function t(t,e,i,n){this.section=t,this.model=e,this.cells=null!=i?i:[],this.cellsMap=null!=n?n:{}}return t.prototype.toJSON=function(){return{cells:this.cells}},t}()}),angular.module("Mac").factory("TableSection",function(){var t;return t=function(){function t(t,e,i,n){this.table=e,this.name=i,this.rows=null!=n?n:[],this.setController(t)}return t.prototype.setController=function(t){return this.ctrl=new t(this)},t.prototype.toJSON=function(){return{rows:this.rows}},t}()}),angular.module("Mac").factory("TableCell",function(){var t;return t=function(){function t(t,e){this.row=t,this.column=e}return t.prototype.value=function(){var t,e;return null!=(t=this.row)&&null!=(e=t.section)?e.ctrl.cellValue(this.row,this.column.colName):void 0},t.prototype.toJSON=function(){return{value:this.value(),column:this.column.colName}},t}()}),angular.module("Mac").factory("tableComponents",["TableSectionController","TableRow","TableSection","TableCell",function(t,e,i,n){return{rowFactory:function(t,i){return new e(t,i)},columnFactory:function(t){var e;return new(e=function(t){this.colName=t})(t)},sectionFactory:function(e,n,r){return null==r&&(r=t),new i(r,e,n)},cellFactory:function(t,e){return null==e&&(e={}),new n(t,e)}}}]),angular.module("Mac").factory("dynamicColumnsFunction",function(){return function(t){var e,i,n,r;return i=t[0],e=function(){var t;t=[];for(n in i)r=i[n],t.push(n);return t}(),this.set(e)}}),angular.module("Mac").factory("TableColumnsController",["tableComponents","dynamicColumnsFunction",function(t,e){var i;return i=function(){function i(t){this.table=t}return i.prototype.dynamic=e,i.prototype.blank=function(){var t,e,i,n,r;for(e={},r=this.table.columnsOrder,i=0,n=r.length;n>i;i++)t=r[i],e[t]=null;return e},i.prototype.reset=function(){return this.table.columnsOrder=[],this.table.columns=[],this.table.columnsMap={}},i.prototype.set=function(e){var i,n,r,s,o;for(this.reset(),this.table.columnsOrder=e,o=[],r=0,s=e.length;s>r;r++)i=e[r],n=t.columnFactory(i),this.table.columnsMap[i]=n,o.push(this.table.columns.push(n));return o},i.prototype.syncOrder=function(){var t,e,i,n,r,s,o,a,l,c,u,h,d,p,f,m;d=this.table.sections;for(s in d)for(r=d[s],p=r.rows,o=0,c=p.length;c>o;o++){for(n=p[o],t=[],f=this.table.columnsOrder,a=0,u=f.length;u>a;a++)e=f[a],t.push(n.cellsMap[e]);n.cells=t}for(i=[],m=this.table.columnsOrder,l=0,h=m.length;h>l;l++)e=m[l],i.push(this.table.columnsMap[e]);return this.table.columns=i},i}()}]),angular.module("Mac").factory("TableRowsController",["tableComponents",function(t){var e;return e=function(){function e(t){this.table=t}return e.prototype.make=function(e,i){var n,r,s,o,a,l,c;for(o=t.rowFactory(e,i),c=this.table.columnsOrder,a=0,l=c.length;l>a;a++)r=c[a],s=this.table.columnsMap[r],n=t.cellFactory(o,s),o.cellsMap[r]=n,o.cells.push(n);return o},e.prototype.set=function(t,e){var i,n,r,s,o;if(r=this.table.sections[t],null!=(null!=e?e.length:void 0)){for(this.table.dynamicColumns&&this.table.columnsCtrl.dynamic(e),n=[],s=0,o=e.length;o>s;s++)i=e[s],n.push(this.make(r,i));return r.rows=n,this.table.columnsCtrl.syncOrder()}},e.prototype.insert=function(t,e,i){var n,r;return r=this.table.sections[t],n=this.make(r,e),r.rows.splice(i,0,n)},e.prototype.remove=function(t,e){var i;return i=this.table.sections[t],i.rows.splice(e,1)},e.prototype.clear=function(t){var e;return e=this.table.sections[t],e.rows=[]},e}()}]),angular.module("Mac").factory("Table",["TableColumnsController","TableRowsController","tableComponents",function(t,e,i){var n,r;return r=function(t){return t&&!angular.isArray(t)?[t]:t},n=function(){function n(i){null==i&&(i=[]),this.sections={},this.columns=[],this.columnsCtrl=new t(this),this.rowsCtrl=new e(this),this.dynamicColumns="dynamic"===i,this.dynamicColumns||this.columnsCtrl.set(i)}return n.prototype.makeSection=function(t){return this.sections[t]=i.sectionFactory(this,t)},n.prototype.load=function(t,e,i){return this.sections[t]||this.makeSection(t),i&&this.loadController(t,i),e?this.loadModels(t,e):void 0},n.prototype.loadModels=function(t,e){var i,n,s,o,a,l,c,u,h,d,p,f,m,g,v,_,b,y,w;if(e=r(e),null!=(_=this.sections[t])?_.rows.length:void 0){for(a=[],c=[],l=[],b=this.sections[t].rows,n=u=0,f=b.length;f>u;n=++u)o=b[n],y=o.model,__indexOf.call(e,y)<0?c.push([t,n]):a.push(o.model);for(c.reverse(),h=0,m=c.length;m>h;h++)i=c[h],this.remove.apply(this,i);for(n=d=0,g=e.length;g>d;n=++d)s=e[n],__indexOf.call(a,s)<0&&l.push([t,s,n]);for(w=[],p=0,v=l.length;v>p;p++)i=l[p],w.push(this.insert.apply(this,i));return w}return this.rowsCtrl.set(t,e)},n.prototype.loadController=function(t,e){return e?this.sections[t].setController(e):void 0},n.prototype.insert=function(t,e,i){return null==i&&(i=0),this.rowsCtrl.insert(t,e,i)},n.prototype.remove=function(t,e){return null==e&&(e=0),this.rowsCtrl.remove(t,e)},n.prototype.clear=function(t){return this.rowsCtrl.clear(t)},n.prototype.blankRow=function(){return this.columnsCtrl.blank()},n.prototype.toJSON=function(){return{sections:this.sections}},n}()}]);var __hasProp={}.hasOwnProperty;angular.module("Mac.Util",[]).factory("util",["$filter",function(t){return{_inflectionConstants:{uncountables:["sheep","fish","moose","series","species","money","rice","information","info","equipment","min"],irregulars:{child:"children",man:"men",woman:"women",person:"people",ox:"oxen",goose:"geese"},pluralizers:[[/(quiz)$/i,"$1zes"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)(ix|ex)$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/x$/i,"xes"],[/s$/i,"s"],[/$/,"s"]]},pluralize:function(e,i,n){var r,s,o,a,l,c,u,h,d,p,f,m;if(null==e&&(e=""),null==n&&(n=!1),!angular.isString(e)||0===e.trim().length)return e;if(n&&isNaN(+i))return"";if(null==i&&(i=2),m=this._inflectionConstants,u=m.pluralizers,h=m.uncountables,r=m.irregulars,d=e.split(/\s/).pop(),s=d.toUpperCase()===d,o=d.toLowerCase(),l=1===i||h.indexOf(o)>=0?d:null,null==l&&null!=r[o]&&(l=r[o]),null==l)for(p=0,f=u.length;f>p;p++)if(c=u[p],c[0].test(o)){l=d.replace(c[0],c[1]);break}return l||(l=d),s&&(l=l.toUpperCase()),a=e.slice(0,-d.length)+l,n?""+t("number")(i)+" "+a:a},capitalize:function(t){var e;return e=String(t)||"",e.charAt(0).toUpperCase()+e.substring(1)},uncapitalize:function(t){var e;return e=String(t)||"",e.charAt(0).toLowerCase()+e.substring(1)},toCamelCase:function(t){return null==t&&(t=""),t.trim().replace(/[-_\s]+(.)?/g,function(t,e){return e.toUpperCase()})},toSnakeCase:function(t){return null==t&&(t=""),t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},convertKeysToCamelCase:function(t){var e,i,n;i={};for(e in t)__hasProp.call(t,e)&&(n=t[e],e=this.toCamelCase(e),"object"==typeof n&&(null!=n?n.constructor:void 0)!==Array&&(n=this.convertKeysToCamelCase(n)),i[e]=n);return i},convertKeysToSnakeCase:function(t){var e,i,n;i={};for(e in t)__hasProp.call(t,e)&&(n=t[e],e=this.toSnakeCase(e),"object"==typeof n&&(null!=n?n.constructor:void 0)!==Array&&(n=this.convertKeysToSnakeCase(n)),i[e]=n);return i},pyth:function(t,e){return Math.sqrt(t*t+e*e)},degrees:function(t){return 180*t/Math.PI},radian:function(t){return t*Math.PI/180},hex2rgb:function(t){var e,i,n;0===t.indexOf("#")&&(t=t.substring(1)),t=t.toLowerCase(),i={},3===t.length?(i.r=t.charAt(0)+t.charAt(0),i.g=t.charAt(1)+t.charAt(1),i.b=t.charAt(2)+t.charAt(2)):(i.r=t.substring(0,2),i.g=t.substring(2,4),i.b=t.substring(4));for(e in i)n=i[e],i[e]=parseInt(n,16);return i},_urlRegex:/(?:(?:(http[s]{0,1}:\/\/)(?:(www|[\d\w\-]+)\.){0,1})|(www|[\d\w\-]+)\.)([\d\w\-]+)\.([A-Za-z]{2,6})(:[\d]*){0,1}(\/?[\d\w\-\?\,\'\/\\\+&%\$#!\=~\.]*){0,1}/i,validateUrl:function(t){var e;return e=this._urlRegex.exec(t),null!=e&&(e={url:e[0],protocol:e[1]||"http://",subdomain:e[2]||e[3],name:e[4],domain:e[5],port:e[6],path:e[7]||"/"},e.url=e.url),e},validateEmail:function(t){var e;return e=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,e.test(t)},getQueryString:function(t,e){var i,n,r;return null==e&&(e=""),e=e.replace(/[[]/,"[").replace(/[]]/,"]"),n="[?&]"+e+"=([^&#]*)",i=new RegExp(n),r=i.exec(t),null!=r?r[1]:""},parseUrlPath:function(t){var e,i,n,r,s,o,a,l,c,u,h;if(o=t.split("?"),i=o[0].split("/"),e=i.slice(0,i.length-1).join("/"),l=i[i.length-1],n={},o.length>1)for(s=o[o.length-1],h=s.split("&"),c=0,u=h.length;u>c;c++)r=h[c],a=r.split("="),n[a[0]]=null!=a[1]?a[1]:"";return{fullPath:t,path:e,pathComponents:i,verb:l,queries:n}},extendAttributes:function(t,e,i){var n,r,s,o,a,l,c;null==t&&(t=""),o={};for(r in e)__hasProp.call(e,r)&&(a=e[r],n=t?this.capitalize(r):r,s=""+t+n,o[r]=null!=i[s]?i[s]||!0:a,"true"===(l=o[r])||"false"===l?o[r]="true"===o[r]:(null!=(c=o[r])?c.length:void 0)>0&&!isNaN(+o[r])&&(o[r]=+o[r]));return o}}}]);